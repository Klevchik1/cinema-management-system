<!-- cinema-management-system/ticket/templates/ticket/screening_detail.html -->
<div class="cinema-hall">
    <div class="screen">ЭКРАН</div>
    
    {% for row_num, seats in rows.items %}
    <div class="row">
        <div class="row-number">{{ row_num }}</div>
        
        {% for seat in seats %}
        <div class="seat {% if seat.id in booked_seat_ids %}booked{% endif %}" 
             data-seat-id="{{ seat.id }}"
             data-row="{{ seat.row }}"
             data-number="{{ seat.number }}">
            {{ seat.number }}
        </div>
        {% endfor %}
    </div>
    {% endfor %}
</div>

<script>
// JavaScript для выбора мест
document.querySelectorAll('.seat:not(.booked)').forEach(seat => {
    seat.addEventListener('click', function() {
        this.classList.toggle('selected');
        updateSelectedSeats();
    });
});

function updateSelectedSeats() {
    const selectedSeats = Array.from(document.querySelectorAll('.seat.selected'))
        .map(seat => seat.dataset.seatId);
    document.getElementById('selected_seats').value = JSON.stringify(selectedSeats);
}
</script>