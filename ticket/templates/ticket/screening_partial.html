<div class="screening-details">
    <h2 style="color: #ffcc00; margin-bottom: 20px; text-align: center;">
        –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–∞–Ω—Å–µ
    </h2>

    <div class="info-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px;">
        <div class="info-item" style="background: rgba(20, 20, 20, 0.7); padding: 15px; border-radius: 8px;">
            <strong>–ù–∞—á–∞–ª–æ:</strong><br>
            {{ screening.start_time|date:"d F Y H:i" }}
        </div>
        <div class="info-item" style="background: rgba(20, 20, 20, 0.7); padding: 15px; border-radius: 8px;">
            <strong>–û–∫–æ–Ω—á–∞–Ω–∏–µ:</strong><br>
            {{ screening.end_time|date:"d F Y H:i" }}
        </div>
        <div class="info-item" style="background: rgba(20, 20, 20, 0.7); padding: 15px; border-radius: 8px;">
            <strong>–ó–∞–ª:</strong><br>
            {{ screening.hall.name }}
        </div>
        <div class="info-item" style="background: rgba(20, 20, 20, 0.7); padding: 15px; border-radius: 8px;">
            <strong>–¶–µ–Ω–∞ –∑–∞ –º–µ—Å—Ç–æ:</strong><br>
            <span class="screening-price">{{ screening.price }}</span> ‚ÇΩ
        </div>
    </div>

    <!-- –°—Ö–µ–º–∞ –∑–∞–ª–∞ -->
    <div class="cinema-hall">
        <div class="screen" style="background: #333; color: white; padding: 15px; margin-bottom: 30px; border-radius: 5px; font-size: 20px; font-weight: bold; box-shadow: 0 0 10px rgba(255, 204, 0, 0.5); text-align: center;">
            –≠–ö–†–ê–ù
        </div>

        <div id="selected-seats-info-{{ screening.id }}" style="margin: 20px 0; font-size: 20px; font-weight: bold; color: #ffcc00; text-align: center;">
            –í—ã–±—Ä–∞–Ω–æ –º–µ—Å—Ç: 0
        </div>

        {% for row, seats in rows.items %}
        <div class="row" style="display: flex; justify-content: center; margin-bottom: 10px;">
            <div class="row-label" style="width: 40px; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #ffcc00;">
                –†—è–¥ {{ row }}
            </div>
            {% for seat in seats %}
            <div class="seat {% if seat.id in booked_seat_ids %}booked{% endif %}"
                 data-seat-id="{{ seat.id }}"
                 data-row="{{ seat.row }}"
                 data-number="{{ seat.number }}"
                 onclick="selectSeatPartial(this, {{ screening.id }})"
                 style="width: 45px; height: 45px; margin: 0 5px; display: flex; justify-content: center; align-items: center; background-color: {% if seat.id in booked_seat_ids %}#f44336{% else %}#4CAF50{% endif %}; color: white; cursor: {% if seat.id in booked_seat_ids %}not-allowed{% else %}pointer{% endif %}; border-radius: 5px; position: relative; transition: all 0.2s; font-weight: bold; user-select: none; opacity: {% if seat.id in booked_seat_ids %}0.7{% else %}1{% endif %};">
                {{ seat.row }}-{{ seat.number }}
                <span class="seat-number" style="font-size: 10px; position: absolute; bottom: 2px; right: 2px;">
                    {{ seat.number }}
                </span>
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>

    <!-- –§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div class="action-buttons" style="margin-top: 30px; text-align: center;">
        <form method="post" action="{% url 'book_tickets' %}" id="booking-form-{{ screening.id }}" onsubmit="return validateBookingForm({{ screening.id }})">
            {% csrf_token %}
            <input type="hidden" name="screening_id" value="{{ screening.id }}">
            <input type="hidden" name="selected_seats" id="selected-seats-input-{{ screening.id }}" value="">

            <button type="submit" class="btn-buy" id="book-button-{{ screening.id }}" disabled
                    style="display: inline-block; background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%); color: #fff; padding: 12px 25px; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-transform: uppercase; letter-spacing: 1px; text-decoration: none; margin-top: 15px; opacity: 0.6; cursor: not-allowed;">
                –ö—É–ø–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –±–∏–ª–µ—Ç—ã
            </button>
        </form>
    </div>

    {% if not user.is_authenticated %}
    <div class="guest-notification" style="
        background: rgba(255, 204, 0, 0.1);
        border: 2px solid #ffcc00;
        border-radius: 10px;
        padding: 20px;
        margin-top: 20px;
        text-align: center;
    ">
        <h3 style="color: #ffcc00; margin-bottom: 15px;">üîê –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h3>
        <p style="color: #fff; margin-bottom: 20px;">
            –î–ª—è –ø–æ–∫—É–ø–∫–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
        </p>
        <div style="display: flex; gap: 15px; justify-content: center;">
            <a href="{% url 'login' %}?next={{ request.path }}" class="btn-buy" style="
                background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
            ">
                –í–æ–π—Ç–∏
            </a>
            <a href="{% url 'register' %}?next={{ request.path }}" class="btn-buy" style="
                background: linear-gradient(135deg, #4a00e0 0%, #8e2de2 100%);
            ">
                –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
            </a>
        </div>
    </div>
    {% endif %}
</div>