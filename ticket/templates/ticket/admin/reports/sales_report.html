<h3 style="color: var(--header-color); margin-bottom: 20px;">üí∞ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂</h3>

{% if report_data %}
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
        <div class="stat-card">
            <div class="stat-number">{{ report_data.total_tickets }}</div>
            <div class="stat-label">–í—Å–µ–≥–æ –±–∏–ª–µ—Ç–æ–≤</div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
            <div class="stat-number">{{ report_data.total_revenue|floatformat:2 }}</div>
            <div class="stat-label">–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞ (—Ä—É–±.)</div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #fc466b 0%, #3f5efb 100%);">
            <div class="stat-number">{{ report_data.avg_ticket_price }}</div>
            <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —á–µ–∫ (—Ä—É–±.)</div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #fdbb2d 0%, #22c1c3 100%);">
            <div class="stat-number">{{ report_data.popular_movie_tickets }}</div>
            <div class="stat-label">–ë–∏–ª–µ—Ç–æ–≤ –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Ñ–∏–ª—å–º</div>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div class="hall-card">
            <h4 style="margin: 0 0 15px 0;">üìã –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px 0;"><strong>–í—Å–µ–≥–æ –ø—Ä–æ–¥–∞–Ω–æ –±–∏–ª–µ—Ç–æ–≤:</strong></td>
                    <td style="padding: 8px 0; text-align: right;">{{ report_data.total_tickets }}</td>
                </tr>
                <tr>
                    <td style="padding: 8px 0;"><strong>–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞:</strong></td>
                    <td style="padding: 8px 0; text-align: right; color: var(--success);">{{ report_data.total_revenue|floatformat:2 }} —Ä—É–±.</td>
                </tr>
                <tr>
                    <td style="padding: 8px 0;"><strong>–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –±–∏–ª–µ—Ç–∞:</strong></td>
                    <td style="padding: 8px 0; text-align: right; color: var(--info);">{{ report_data.avg_ticket_price }} —Ä—É–±.</td>
                </tr>
                <tr>
                    <td style="padding: 8px 0;"><strong>–°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Ñ–∏–ª—å–º:</strong></td>
                    <td style="padding: 8px 0; text-align: right;">{{ report_data.popular_movie }}</td>
                </tr>
                <tr>
                    <td style="padding: 8px 0;"><strong>–ë–∏–ª–µ—Ç–æ–≤ –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Ñ–∏–ª—å–º:</strong></td>
                    <td style="padding: 8px 0; text-align: right; color: var(--primary);">{{ report_data.popular_movie_tickets }}</td>
                </tr>
            </table>
        </div>

        <div class="hall-card">
            <h4 style="margin: 0 0 15px 0;">üìà –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h4>
            {% if report_data.total_tickets > 0 %}
                <div style="margin-bottom: 15px;">
                    <div style="font-size: 0.8em; color: var(--body-quiet-color);">–°—Ä–µ–¥–Ω—è—è –≤—ã—Ä—É—á–∫–∞ –Ω–∞ –±–∏–ª–µ—Ç</div>
                    <div style="font-size: 1.5em; font-weight: bold; color: var(--success);">
                        {% widthratio report_data.total_revenue report_data.total_tickets 1 as avg_revenue_per_ticket %}
                        {{ avg_revenue_per_ticket|floatformat:2 }} —Ä—É–±.
                    </div>
                </div>
                <div>
                    <div style="font-size: 0.8em; color: var(--body-quiet-color); margin-bottom: 5px;">
                        –î–æ–ª—è –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ ({{ report_data.popular_movie_tickets }} –∏–∑ {{ report_data.total_tickets }})
                    </div>
                    <!-- –ò–°–ü–†–ê–í–õ–ï–ù–û: –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ -->
                    <div class="progress" style="height: 25px; background: var(--darkened-bg); border-radius: 5px; overflow: hidden; position: relative;">
                        <div class="progress-bar"
                             style="height: 100%;
                                    background: var(--warning);
                                    width: {% widthratio report_data.popular_movie_tickets report_data.total_tickets 100 %}%;
                                    border-radius: 5px;
                                    transition: width 0.3s ease;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    color: white;
                                    font-weight: bold;
                                    font-size: 0.8em;
                                    min-width: {% if report_data.popular_movie_tickets > 0 %}30px{% else %}0{% endif %};">
                            {% widthratio report_data.popular_movie_tickets report_data.total_tickets 100 %}%
                        </div>
                    </div>
                </div>
            {% else %}
                <div style="color: var(--body-quiet-color);">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
            {% endif %}
        </div>
    </div>
{% else %}
    <div class="alert alert-info">
        ‚ÑπÔ∏è –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.
    </div>
{% endif %}