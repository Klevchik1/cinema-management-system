<div class="sales-report">
    <h2 style="color: var(--report-secondary); margin-bottom: 25px; font-size: 1.5rem; border-bottom: 2px solid var(--report-border); padding-bottom: 10px;">
        üí∞ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
    </h2>

    {% if report_data %}
        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ -->
        <div class="stat-grid">
            <div class="stat-card">
                <div class="stat-label">–í—Å–µ–≥–æ –ø—Ä–æ–¥–∞–Ω–æ</div>
                <div class="stat-number">{{ report_data.total_tickets }}</div>
                <div style="font-size: 0.9rem; color: var(--report-muted); margin-top: 5px;">
                    –±–∏–ª–µ—Ç–æ–≤
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞</div>
                <div class="stat-number">{{ report_data.total_revenue|floatformat:2 }} ‚ÇΩ</div>
                <div style="font-size: 0.9rem; color: var(--report-muted); margin-top: 5px;">
                    —Ä—É–±–ª–µ–π
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —á–µ–∫</div>
                <div class="stat-number">{{ report_data.avg_ticket_price|floatformat:2 }} ‚ÇΩ</div>
                <div style="font-size: 0.9rem; color: var(--report-muted); margin-top: 5px;">
                    –Ω–∞ –±–∏–ª–µ—Ç
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–¢–æ–ø —Ñ–∏–ª—å–º</div>
                <div style="font-size: 1.1rem; font-weight: 600; margin: 10px 0; color: var(--report-secondary);">
                    {{ report_data.popular_movie|truncatechars:15 }}
                </div>
                <div style="font-size: 0.9rem; color: var(--report-muted);">
                    {{ report_data.popular_movie_tickets }} –±–∏–ª–µ—Ç–æ–≤
                </div>
            </div>
        </div>

        <!-- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-top: 30px;">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –¥–µ—Ç–∞–ª–∏ -->
            <div class="hall-card">
                <h3 style="margin: 0 0 15px 0; color: var(--report-secondary); font-size: 1.2rem;">
                    üìã –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                </h3>
                <table style="width: 100%;">
                    <tr>
                        <td style="padding: 10px 0; border-bottom: 1px solid var(--report-border);">
                            <strong>–í—Å–µ–≥–æ –ø—Ä–æ–¥–∞–Ω–æ –±–∏–ª–µ—Ç–æ–≤:</strong>
                        </td>
                        <td style="padding: 10px 0; text-align: right; border-bottom: 1px solid var(--report-border);">
                            <span style="font-weight: bold; color: var(--report-secondary);">
                                {{ report_data.total_tickets }}
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 10px 0; border-bottom: 1px solid var(--report-border);">
                            <strong>–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞:</strong>
                        </td>
                        <td style="padding: 10px 0; text-align: right; border-bottom: 1px solid var(--report-border);">
                            <span style="font-weight: bold; color: var(--report-success);">
                                {{ report_data.total_revenue|floatformat:2 }} ‚ÇΩ
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 10px 0; border-bottom: 1px solid var(--report-border);">
                            <strong>–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –±–∏–ª–µ—Ç–∞:</strong>
                        </td>
                        <td style="padding: 10px 0; text-align: right; border-bottom: 1px solid var(--report-border);">
                            <span style="font-weight: bold; color: var(--report-info);">
                                {{ report_data.avg_ticket_price|floatformat:2 }} ‚ÇΩ
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 10px 0; border-bottom: 1px solid var(--report-border);">
                            <strong>–°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Ñ–∏–ª—å–º:</strong>
                        </td>
                        <td style="padding: 10px 0; text-align: right; border-bottom: 1px solid var(--report-border);">
                            <span style="font-weight: bold; color: var(--report-text);">
                                {{ report_data.popular_movie }}
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 10px 0;">
                            <strong>–ë–∏–ª–µ—Ç–æ–≤ –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Ñ–∏–ª—å–º:</strong>
                        </td>
                        <td style="padding: 10px 0; text-align: right;">
                            <span style="font-weight: bold; color: var(--report-secondary);">
                                {{ report_data.popular_movie_tickets }}
                            </span>
                        </td>
                    </tr>
                </table>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: —Ç–æ–ª—å–∫–æ –¥–æ–ª—è –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ -->
            <div class="hall-card">
                <h3 style="margin: 0 0 15px 0; color: var(--report-secondary); font-size: 1.2rem;">
                    üìà –î–æ–ª—è –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞
                </h3>

                {% if report_data.total_tickets > 0 %}
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 3rem; font-weight: bold; color: var(--report-success); margin-bottom: 10px;">
                            {% if report_data.total_tickets > 0 %}
                                {% widthratio report_data.popular_movie_tickets report_data.total_tickets 100 as popularity_percent %}
                                {{ popularity_percent }}%
                            {% else %}
                                0%
                            {% endif %}
                        </div>
                        <div style="font-size: 1rem; color: var(--report-muted);">
                            –æ—Ç –≤—Å–µ—Ö –ø—Ä–æ–¥–∞–∂
                        </div>
                        <div style="margin-top: 20px; font-size: 0.9rem; color: var(--report-text);">
                            {{ report_data.popular_movie_tickets }} –∏–∑ {{ report_data.total_tickets }} –±–∏–ª–µ—Ç–æ–≤
                        </div>
                    </div>
                {% else %}
                    <div style="text-align: center; padding: 20px; color: var(--report-muted);">
                        –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –¥–æ–ª–∏
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div style="margin-top: 30px; padding: 20px; background: var(--report-card-bg); border-radius: 8px; border: 1px solid var(--report-border);">
            <h3 style="margin: 0 0 15px 0; color: var(--report-text); font-size: 1.1rem;">
                üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            </h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                <div style="text-align: center;">
                    <div style="font-size: 0.9rem; color: var(--report-muted); margin-bottom: 5px;">
                        –ü–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞
                    </div>
                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--report-secondary);">
                        {% if filters.period == 'daily' %}–ü–æ –¥–Ω—è–º
                        {% elif filters.period == 'weekly' %}–ü–æ –Ω–µ–¥–µ–ª—è–º
                        {% elif filters.period == 'monthly' %}–ü–æ –º–µ—Å—è—Ü–∞–º
                        {% else %}–ù–µ —É–∫–∞–∑–∞–Ω{% endif %}
                    </div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 0.9rem; color: var(--report-muted); margin-bottom: 5px;">
                        –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞
                    </div>
                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--report-success);">
                        {{ report_data.total_revenue|floatformat:2 }} ‚ÇΩ
                    </div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 0.9rem; color: var(--report-muted); margin-bottom: 5px;">
                        –°—Ä–µ–¥–Ω–∏–π —á–µ–∫
                    </div>
                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--report-info);">
                        {{ report_data.avg_ticket_price|floatformat:2 }} ‚ÇΩ
                    </div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 0.9rem; color: var(--report-muted); margin-bottom: 5px;">
                        –ü—Ä–æ–¥–∞–Ω–æ –±–∏–ª–µ—Ç–æ–≤
                    </div>
                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--report-warning);">
                        {{ report_data.total_tickets }}
                    </div>
                </div>
            </div>
        </div>
    {% else %}
        <div class="alert">
            ‚ÑπÔ∏è –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.
        </div>
    {% endif %}
</div>