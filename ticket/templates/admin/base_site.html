{% extends "admin/base.html" %}
{% load static %}

{% block title %}{% if subtitle %}{{ subtitle }} | {% endif %}{{ title }} | –ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä "–ü—Ä–µ–º—å–µ—Ä–∞"{% endblock %}

{% block branding %}
<h1 id="site-name">
    <a href="{% url 'admin:index' %}">
        üé¨ –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨
    </a>
</h1>
{% endblock %}

{% block extrastyle %}
{{ block.super }}
<style>
    /* ===== –û–°–ù–û–í–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ===== */
    :root {
        /* –¶–≤–µ—Ç–∞ –∏–∑ –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞ */
        --cinema-red: #ff0000;
        --cinema-dark-red: #cc0000;
        --cinema-yellow: #ffcc00;
        --cinema-purple: #4a00e0;
        --cinema-light-purple: #8e2de2;
        --cinema-black: #000000;
        --cinema-dark-gray: #222222;
        --cinema-card: rgba(30, 30, 30, 0.95);
        --cinema-white: #ffffff;
        --cinema-gray: #aaaaaa;

        /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Django */
        --primary: var(--cinema-red);
        --secondary: var(--cinema-purple);
        --accent: var(--cinema-yellow);
        --body-bg: var(--cinema-black);
        --body-fg: var(--cinema-white);
        --header-bg: rgba(20, 20, 20, 0.98);
        --header-color: var(--cinema-yellow);
        --header-link-color: var(--cinema-yellow);
        --breadcrumbs-bg: rgba(30, 30, 30, 0.9);
        --darkened-bg: rgba(40, 40, 40, 0.9);
        --border-color: var(--cinema-red);
        --button-bg: var(--cinema-red);
        --button-hover-bg: var(--cinema-dark-red);
        --default-button-bg: var(--cinema-purple);
        --default-button-hover-bg: var(--cinema-light-purple);
        --link-fg: var(--cinema-yellow);
        --link-hover-color: var(--cinema-red);
        --link-selected-fg: var(--cinema-white);
    }

    /* ===== –°–ë–†–û–° –ò –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò ===== */
    * {
        box-sizing: border-box;
    }

    body {
        background: linear-gradient(135deg, var(--cinema-black) 0%, var(--cinema-dark-gray) 100%) !important;
        color: var(--cinema-white) !important;
        font-family: 'Arial', sans-serif !important;
        font-size: 14px !important;
        line-height: 1.4 !important;
        min-height: 100vh;
        margin: 0;
        padding: 0;
    }

    /* ===== –®–ê–ü–ö–ê (–ò–°–ü–†–ê–í–õ–Ø–ï–ú) ===== */
    #header {
        background: var(--header-bg) !important;
        color: var(--cinema-yellow) !important;
        border-bottom: 2px solid var(--cinema-yellow) !important;
        height: 50px !important; /* –£–º–µ–Ω—å—à–∞–µ–º –≤—ã—Å–æ—Ç—É */
        padding: 0 20px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: space-between !important;
        box-shadow: 0 2px 10px rgba(255, 0, 0, 0.2) !important;
        position: relative !important;
        z-index: 1000 !important;
    }

    #branding {
        display: flex !important;
        align-items: center !important;
        height: 100% !important;
    }

    #site-name {
        margin: 0 !important;
        padding: 0 !important;
        font-size: 18px !important; /* –£–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑–º–µ—Ä */
        font-weight: bold !important;
        letter-spacing: 0.5px !important;
    }

    #site-name a {
        color: var(--cinema-yellow) !important;
        text-decoration: none !important;
        padding: 8px 15px !important;
        background: rgba(255, 0, 0, 0.2) !important;
        border-radius: 6px !important;
        border: 1px solid var(--cinema-yellow) !important;
        display: inline-block !important;
        transition: all 0.3s ease !important;
        line-height: 1.2 !important;
    }

    #site-name a:hover {
        background: rgba(255, 0, 0, 0.4) !important;
        transform: translateY(-1px) !important;
        box-shadow: 0 3px 8px rgba(255, 0, 0, 0.3) !important;
    }

    /* ===== –£–ë–ò–†–ê–ï–ú –õ–ò–®–ù–ò–ï –ö–ù–û–ü–ö–ò –í –®–ê–ü–ö–ï ===== */
    #header #user-tools {
        margin: 0 !important;
        padding: 0 !important;
        font-size: 12px !important;
        text-align: right !important;
    }

    #header #user-tools br {
        display: none !important;
    }

    #header #user-tools a {
        color: var(--cinema-yellow) !important;
        text-decoration: none !important;
        padding: 5px 10px !important;
        background: rgba(255, 0, 0, 0.2) !important;
        border-radius: 4px !important;
        margin-left: 5px !important;
        font-size: 12px !important;
        display: inline-block !important;
        line-height: 1.2 !important;
        border: 1px solid transparent !important;
        transition: all 0.3s ease !important;
    }

    #header #user-tools a:hover {
        background: rgba(255, 0, 0, 0.4) !important;
        border-color: var(--cinema-yellow) !important;
    }

    /* ===== –£–ë–ò–†–ê–ï–ú –ö–ù–û–ü–ö–£ –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –¢–ï–ú ===== */
    #header #toggle-theme,
    #header .theme-toggle,
    #header a[href*="theme"] {
        display: none !important;
    }

    /* ===== –ë–û–ö–û–í–û–ï –ú–ï–ù–Æ (–ù–ê–í–ò–ì–ê–¶–ò–Ø) ===== */
    #nav-sidebar {
        background: var(--cinema-card) !important;
        border-right: 2px solid var(--cinema-red) !important;
        padding: 15px 0 !important;
        width: 220px !important;
        box-shadow: 2px 0 10px rgba(255, 0, 0, 0.1) !important;
    }

    #nav-sidebar .module {
        background: transparent !important;
        border: none !important;
        margin: 0 0 15px 0 !important;
        padding: 0 !important;
        box-shadow: none !important;
    }

    #nav-sidebar .module h2 {
        background: linear-gradient(135deg, var(--cinema-red) 0%, var(--cinema-dark-red) 100%) !important;
        color: var(--cinema-white) !important;
        padding: 10px 15px !important;
        margin: 0 0 5px 0 !important;
        border: none !important;
        border-radius: 0 !important;
        font-size: 13px !important;
        font-weight: bold !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
    }

    #nav-sidebar .module ul {
        padding: 0 !important;
        margin: 0 !important;
    }

    #nav-sidebar .module li {
        list-style: none !important;
        margin: 0 !important;
    }

    #nav-sidebar .module li a {
        color: var(--cinema-gray) !important;
        text-decoration: none !important;
        padding: 8px 15px !important;
        display: block !important;
        transition: all 0.2s ease !important;
        border-left: 3px solid transparent !important;
        font-size: 13px !important;
        line-height: 1.3 !important;
    }

    #nav-sidebar .module li a:hover {
        color: var(--cinema-yellow) !important;
        background: rgba(255, 0, 0, 0.1) !important;
        border-left-color: var(--cinema-yellow) !important;
    }

    #nav-sidebar .module li.selected a {
        color: var(--cinema-yellow) !important;
        background: rgba(255, 0, 0, 0.2) !important;
        border-left-color: var(--cinema-red) !important;
        font-weight: bold !important;
    }

    /* ===== –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ ===== */
    #content {
        padding: 20px !important;
        margin: 0 !important;
        min-height: calc(100vh - 50px) !important;
    }

    #content-main {
        background: var(--cinema-card) !important;
        border: 2px solid var(--cinema-red) !important;
        border-radius: 10px !important;
        padding: 20px !important;
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.2) !important;
        margin-bottom: 20px !important;
    }

    /* ===== –ö–ù–û–ü–ö–ò (–ò–°–ü–†–ê–í–õ–Ø–ï–ú –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –¢–ï–ö–°–¢–ê) ===== */
    .button, input[type="submit"], input[type="button"],
    .submit-row input, a.button, .btn {
        background: linear-gradient(135deg, var(--cinema-red) 0%, var(--cinema-dark-red) 100%) !important;
        color: var(--cinema-white) !important;
        border: none !important;
        border-radius: 6px !important;
        padding: 8px 16px !important;
        font-size: 13px !important;
        font-weight: bold !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
        cursor: pointer !important;
        text-decoration: none !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        height: 38px !important; /* –£–ù–ò–§–ò–¶–ò–†–û–í–ê–ù–ê–Ø –í–´–°–û–¢–ê */
        line-height: 1 !important;
        vertical-align: middle !important;
        transition: all 0.3s ease !important;
        box-shadow: 0 2px 5px rgba(255, 0, 0, 0.3) !important;
        margin: 2px !important;
        min-width: 80px !important;
    }

    .button:hover, input[type="submit"]:hover, input[type="button"]:hover,
    a.button:hover, .submit-row input:hover {
        background: linear-gradient(135deg, var(--cinema-dark-red) 0%, #990000 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 4px 10px rgba(255, 0, 0, 0.4) !important;
    }

    .button.default, input[type="submit"].default {
        background: linear-gradient(135deg, var(--cinema-purple) 0%, var(--cinema-light-purple) 100%) !important;
    }

    .button.default:hover, input[type="submit"].default:hover {
        background: linear-gradient(135deg, #3a00b0 0%, #6e1dc2 100%) !important;
    }

    /* ===== –í–´–ü–ê–î–ê–Æ–©–ò–ï –°–ü–ò–°–ö–ò –ò –ö–ù–û–ü–ö–ò –° –ú–ï–ù–Æ ===== */
    .selector {
        background: rgba(20, 20, 20, 0.9) !important;
        border: 2px solid var(--cinema-red) !important;
        border-radius: 6px !important;
        padding: 5px !important;
        margin: 5px 0 !important;
    }

    .selector select {
        background: transparent !important;
        color: var(--cinema-white) !important;
        border: none !important;
        padding: 8px !important;
        width: 100% !important;
    }

    /* –ö–Ω–æ–ø–∫–∏ —Å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–º (–≤—ã–ø–∞–¥–∞—é—â–∏–µ) */
    .selector .selector-chooseall,
    .selector .selector-clearall {
        background: rgba(255, 0, 0, 0.3) !important;
        color: var(--cinema-yellow) !important;
        border: 1px solid var(--cinema-yellow) !important;
        border-radius: 4px !important;
        padding: 4px 8px !important;
        font-size: 11px !important;
        margin: 2px !important;
    }

    /* ===== –§–û–†–ú–´ ===== */
    .form-row {
        padding: 10px 0 !important;
        border-bottom: 1px solid rgba(255, 0, 0, 0.1) !important;
    }

    .form-row:last-child {
        border-bottom: none !important;
    }

    label {
        color: var(--cinema-yellow) !important;
        font-weight: bold !important;
        font-size: 13px !important;
        margin-bottom: 5px !important;
        display: block !important;
    }

    input[type="text"], input[type="password"], input[type="email"],
    input[type="number"], input[type="date"], input[type="time"],
    select, textarea {
        background: rgba(20, 20, 20, 0.9) !important;
        border: 2px solid var(--cinema-red) !important;
        color: var(--cinema-white) !important;
        border-radius: 6px !important;
        padding: 8px 12px !important;
        font-size: 13px !important;
        width: 100% !important;
        max-width: 400px !important;
        transition: all 0.3s ease !important;
    }

    input:focus, select:focus, textarea:focus {
        border-color: var(--cinema-yellow) !important;
        outline: none !important;
        box-shadow: 0 0 8px rgba(255, 204, 0, 0.3) !important;
    }

    /* ===== –¢–ê–ë–õ–ò–¶–´ ===== */
    #changelist {
        background: transparent !important;
        border: none !important;
        box-shadow: none !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    /* –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–ë–ò–†–ê–ï–ú –°–í–ï–ß–ï–ù–ò–ï –° –ë–û–ö–û–í–´–• –°–¢–û–†–û–ù */
    #changelist .results {
        background: var(--cinema-card) !important;
        border: 2px solid var(--cinema-red) !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        margin-bottom: 20px !important;
        /* –£–ë–ò–†–ê–ï–ú box-shadow - –æ–Ω —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å–æ —Å–≤–µ—á–µ–Ω–∏–µ–º */
        box-shadow: 0 5px 15px rgba(255, 0, 0, 0.1) !important; /* –¢–æ–ª—å–∫–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Ç–µ–Ω—å */
    }

    #result_list {
        width: 100% !important;
        border-collapse: collapse !important;
    }

    #result_list thead th {
        background: linear-gradient(135deg, #222 0%, #333 100%) !important;
        color: var(--cinema-yellow) !important;
        padding: 12px 15px !important;
        border-bottom: 2px solid var(--cinema-red) !important;
        font-weight: bold !important;
        text-transform: uppercase !important;
        font-size: 12px !important;
        text-align: left !important;
    }

    #result_list tbody td, #result_list tbody th {
        padding: 10px 15px !important;
        border-bottom: 1px solid rgba(255, 0, 0, 0.1) !important;
        color: var(--cinema-white) !important;
        font-size: 13px !important;
        vertical-align: middle !important;
    }

    #result_list tbody tr:hover {
        background: rgba(255, 0, 0, 0.05) !important;
    }

    /* ===== –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ –§–ò–õ–¨–¢–†–û–í ===== */
    #changelist-filter {
        background: var(--cinema-card) !important;
        border: 2px solid var(--cinema-red) !important;
        border-radius: 8px !important;
        padding: 15px !important;
        margin: 0 0 20px 20px !important;
        width: 250px !important;
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.2) !important;
    }

    #changelist-filter h2 {
        background: linear-gradient(135deg, var(--cinema-red) 0%, var(--cinema-dark-red) 100%) !important;
        color: var(--cinema-white) !important;
        padding: 10px !important;
        margin: -15px -15px 15px -15px !important;
        border-radius: 6px 6px 0 0 !important;
        font-size: 14px !important;
        font-weight: bold !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
    }

    /* ===== –°–û–û–ë–©–ï–ù–ò–Ø ===== */
    .messagelist {
        margin: 0 0 20px 0 !important;
        padding: 0 !important;
    }

    .messagelist li {
        background: rgba(255, 0, 0, 0.2) !important;
        border: 1px solid var(--cinema-red) !important;
        color: var(--cinema-white) !important;
        border-radius: 6px !important;
        padding: 12px 15px !important;
        margin: 0 0 10px 0 !important;
        list-style: none !important;
        font-size: 13px !important;
    }

    .messagelist li.success {
        background: rgba(76, 175, 80, 0.2) !important;
        border-color: #4CAF50 !important;
    }

    .messagelist li.warning {
        background: rgba(255, 152, 0, 0.2) !important;
        border-color: #ff9800 !important;
    }

    .messagelist li.error {
        background: rgba(244, 67, 54, 0.2) !important;
        border-color: #f44336 !important;
    }

    /* ===== –•–õ–ï–ë–ù–´–ï –ö–†–û–®–ö–ò ===== */
    .breadcrumbs {
        background: rgba(30, 30, 30, 0.9) !important;
        border: 1px solid var(--cinema-red) !important;
        border-radius: 6px !important;
        padding: 10px 15px !important;
        margin: 0 0 20px 0 !important;
        color: var(--cinema-yellow) !important;
        font-size: 12px !important;
    }

    .breadcrumbs a {
        color: var(--cinema-yellow) !important;
        text-decoration: none !important;
        font-weight: bold !important;
    }

    .breadcrumbs a:hover {
        color: var(--cinema-red) !important;
        text-decoration: underline !important;
    }

    /* ===== OBJECT TOOLS (–∫–Ω–æ–ø–∫–∏ –Ω–∞–¥ —Ç–∞–±–ª–∏—Ü–µ–π) ===== */
    .object-tools {
        margin: 0 0 20px 0 !important;
        padding: 0 !important;
    }

    .object-tools li {
        display: inline-block !important;
        margin: 0 5px 5px 0 !important;
    }

    /* ===== –£–ë–ò–†–ê–ï–ú –í–°–ï –õ–ò–®–ù–ò–ï –ö–ù–û–ü–ö–ò –ò –°–°–´–õ–ö–ò ===== */
    #header a[href*="backup_management"],
    #header a[href="/"],
    #header a.backup-link {
        display: none !important;
    }

    /* =================================================================== */
    /* =============== –ù–ê–ß–ê–õ–û –ù–û–í–´–• –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô ================ */
    /* =================================================================== */

    /* ===== 1. –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–ò–°–ö–ê ===== */
    #changelist-search {
        display: flex !important;
        align-items: center !important;
        gap: 10px !important;
        margin-bottom: 20px !important;
        flex-wrap: wrap !important;
    }

    #searchbar {
        height: 38px !important;
        line-height: 38px !important;
        padding: 0 15px !important;
        min-width: 300px !important;
        flex-grow: 1 !important;
        background: rgba(20, 20, 20, 0.9) !important;
        border: 2px solid var(--cinema-red) !important;
        color: var(--cinema-white) !important;
        border-radius: 6px !important;
        font-size: 14px !important;
        transition: all 0.3s ease !important;
    }

    #searchbar:focus {
        border-color: var(--cinema-yellow) !important;
        box-shadow: 0 0 10px rgba(255, 204, 0, 0.3) !important;
        outline: none !important;
    }

    #changelist-search button[type="submit"] {
        height: 38px !important;
        line-height: 1 !important;
        padding: 0 25px !important;
        background: linear-gradient(135deg, var(--cinema-red) 0%, var(--cinema-dark-red) 100%) !important;
        color: var(--cinema-white) !important;
        border: none !important;
        border-radius: 6px !important;
        font-weight: bold !important;
        font-size: 14px !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        white-space: nowrap !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        vertical-align: middle !important;
        min-width: 100px !important;
    }

    #changelist-search button[type="submit"]:hover {
        background: linear-gradient(135deg, var(--cinema-dark-red) 0%, #990000 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 4px 10px rgba(255, 0, 0, 0.4) !important;
    }

    /* ===== 2. –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –í–´–ü–ê–î–ê–Æ–©–ï–ì–û –°–ü–ò–°–ö–ê –î–ï–ô–°–¢–í–ò–ô ===== */
    #changelist-form .actions {
        display: flex !important;
        align-items: center !important;
        gap: 10px !important;
        margin-bottom: 20px !important;
        flex-wrap: wrap !important;
    }

    #changelist-form .actions select[name="action"] {
        height: 38px !important;
        line-height: 38px !important;
        padding: 0 40px 0 15px !important;
        min-width: 200px !important;
        background: rgba(20, 20, 20, 0.9) !important;
        border: 2px solid var(--cinema-red) !important;
        color: var(--cinema-white) !important;
        border-radius: 6px !important;
        font-size: 14px !important;
        appearance: none !important;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffcc00'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e") !important;
        background-repeat: no-repeat !important;
        background-position: right 12px center !important;
        background-size: 16px !important;
        cursor: pointer !important;
    }

    #changelist-form .actions select[name="action"] option {
        padding: 10px 15px !important;
        line-height: 1.4 !important;
        background: rgba(30, 30, 30, 0.95) !important;
        color: var(--cinema-white) !important;
        font-size: 14px !important;
        display: flex !important;
        align-items: center !important;
        min-height: 36px !important;
    }

    #changelist-form .actions select[name="action"]:focus {
        border-color: var(--cinema-yellow) !important;
        outline: none !important;
        box-shadow: 0 0 10px rgba(255, 204, 0, 0.3) !important;
    }

    /* ===== 3. –ì–û–†–ò–ó–û–ù–¢–ê–õ–¨–ù–ê–Ø –ü–†–û–ö–†–£–¢–ö–ê –î–õ–Ø –î–õ–ò–ù–ù–´–• –¢–ê–ë–õ–ò–¶ ===== */
    #changelist .results {
        overflow-x: auto !important;
        overflow-y: visible !important;
        -webkit-overflow-scrolling: touch !important;
        margin-bottom: 20px !important;
        border-radius: 8px !important;
        border: 2px solid var(--cinema-red) !important;
        position: relative !important;
        /* –£–ë–ò–†–ê–ï–ú –í–°–ï –¢–ï–ù–ò –° –ë–û–ö–û–í - –æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—É —Å–æ —Å–≤–µ—á–µ–Ω–∏–µ–º –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ */
        box-shadow: 0 5px 15px rgba(255, 0, 0, 0.15) !important; /* –¢–æ–ª—å–∫–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Ç–µ–Ω—å */
    }

    #result_list {
        min-width: 1000px !important;
        width: 100% !important;
        table-layout: auto !important;
    }

    /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ - –£–ü–†–û–©–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø */
    #changelist .results::-webkit-scrollbar {
        height: 8px !important;
    }

    #changelist .results::-webkit-scrollbar-track {
        background: rgba(255, 0, 0, 0.05) !important;
        border-radius: 4px !important;
        margin: 0 10px !important;
    }

    #changelist .results::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, var(--cinema-red) 0%, var(--cinema-dark-red) 100%) !important;
        border-radius: 4px !important;
    }

    #changelist .results::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, var(--cinema-dark-red) 0%, #990000 100%) !important;
    }

    /* ===== 4. –ï–î–ò–ù–´–ô –†–ê–ó–ú–ï–† –î–õ–Ø –í–´–ü–ê–î–ê–Æ–©–ò–• –°–ü–ò–°–ö–û–í –í –û–¢–ß–ï–¢–ê–• ===== */
    .report-filters {
        background: var(--cinema-card) !important;
        border: 2px solid var(--cinema-red) !important;
        border-radius: 8px !important;
        padding: 20px !important;
        margin-bottom: 25px !important;
        /* –£–±–∏—Ä–∞–µ–º –±–æ–∫–æ–≤—ã–µ —Ç–µ–Ω–∏ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤ —Ç–æ–∂–µ */
        box-shadow: 0 5px 15px rgba(255, 0, 0, 0.1) !important;
    }

    .report-filters .form-row {
        display: flex !important;
        align-items: center !important;
        gap: 15px !important;
        margin-bottom: 20px !important;
        flex-wrap: wrap !important;
    }

    .report-filters .form-row label {
        min-width: 140px !important;
        text-align: right !important;
        font-weight: bold !important;
        color: var(--cinema-yellow) !important;
        margin: 0 !important;
        font-size: 14px !important;
    }

    .report-filters select,
    .report-filters input[type="text"],
    .report-filters input[type="date"] {
        height: 38px !important;
        min-width: 220px !important;
        max-width: 300px !important;
        background: rgba(20, 20, 20, 0.9) !important;
        border: 2px solid var(--cinema-red) !important;
        color: var(--cinema-white) !important;
        border-radius: 6px !important;
        padding: 0 15px !important;
        font-size: 14px !important;
        line-height: 38px !important;
        box-sizing: border-box !important;
        vertical-align: middle !important;
        transition: all 0.3s ease !important;
    }

    .report-filters select {
        appearance: none !important;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffcc00'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e") !important;
        background-repeat: no-repeat !important;
        background-position: right 12px center !important;
        background-size: 16px !important;
        padding-right: 40px !important;
    }

    .report-filters select:focus,
    .report-filters input[type="text"]:focus,
    .report-filters input[type="date"]:focus {
        border-color: var(--cinema-yellow) !important;
        outline: none !important;
        box-shadow: 0 0 10px rgba(255, 204, 0, 0.3) !important;
    }

    /* ===== 5. –£–õ–£–ß–®–ï–ù–ò–Ø –î–õ–Ø –í–°–ï–• –í–´–ü–ê–î–ê–Æ–©–ò–• –°–ü–ò–°–ö–û–í ===== */
    select {
        height: 38px !important;
        line-height: 38px !important;
        padding: 0 40px 0 15px !important;
        background: rgba(20, 20, 20, 0.9) url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffcc00'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e") no-repeat right 12px center/16px !important;
        border: 2px solid var(--cinema-red) !important;
        color: var(--cinema-white) !important;
        border-radius: 6px !important;
        font-size: 14px !important;
        appearance: none !important;
        cursor: pointer !important;
        min-height: 38px !important;
    }

    select:focus {
        border-color: var(--cinema-yellow) !important;
        outline: none !important;
        box-shadow: 0 0 10px rgba(255, 204, 0, 0.3) !important;
    }

    select option {
        padding: 10px 15px !important;
        line-height: 1.4 !important;
        background: rgba(30, 30, 30, 0.95) !important;
        color: var(--cinema-white) !important;
        font-size: 14px !important;
        min-height: 36px !important;
        display: flex !important;
        align-items: center !important;
    }

    /* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• –£–°–¢–†–û–ô–°–¢–í ===== */
    @media (max-width: 768px) {
        /* –®–∞–ø–∫–∞ */
        #header {
            height: auto !important;
            padding: 10px !important;
            flex-direction: column !important;
        }

        #branding {
            margin-bottom: 10px !important;
        }

        #nav-sidebar {
            width: 100% !important;
            margin-bottom: 20px !important;
        }

        #changelist-filter {
            width: 100% !important;
            margin: 0 0 20px 0 !important;
        }

        /* –ü–æ–∏—Å–∫ –∏ –¥–µ–π—Å—Ç–≤–∏—è */
        #changelist-search {
            flex-direction: column !important;
            align-items: stretch !important;
        }

        #searchbar {
            min-width: 100% !important;
            margin-bottom: 10px !important;
        }

        #changelist-search button[type="submit"] {
            width: 100% !important;
        }

        #changelist-form .actions {
            flex-direction: column !important;
            align-items: stretch !important;
        }

        #changelist-form .actions select[name="action"] {
            min-width: 100% !important;
            margin-bottom: 10px !important;
        }

        /* –û—Ç—á–µ—Ç—ã */
        .report-filters .form-row {
            flex-direction: column !important;
            align-items: stretch !important;
            gap: 8px !important;
        }

        .report-filters .form-row label {
            min-width: 100% !important;
            text-align: left !important;
            margin-bottom: 5px !important;
        }

        .report-filters select,
        .report-filters input[type="text"],
        .report-filters input[type="date"] {
            min-width: 100% !important;
            max-width: 100% !important;
        }

        /* –¢–∞–±–ª–∏—Ü—ã */
        #result_list {
            min-width: 800px !important;
        }

        /* –£–±–∏—Ä–∞–µ–º –≤—Å–µ —Ç–µ–Ω–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã */
        #changelist .results,
        .report-filters,
        #content-main {
            box-shadow: 0 3px 10px rgba(255, 0, 0, 0.1) !important;
        }
    }

    /* ===== –í–ê–ñ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–ë–ò–†–ê–ï–ú –í–°–ï –ë–û–ö–û–í–´–ï –¢–ï–ù–ò ===== */
    /* –≠—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å–æ —Å–≤–µ—á–µ–Ω–∏–µ–º –ø—Ä–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–µ */
    #changelist .results:before,
    #changelist .results:after {
        display: none !important;
    }

    /* –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –¥–µ–ª–∞–µ–º —Ç–µ–Ω—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    .results-container {
        position: relative;
    }

    .results-container:after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 20px;
        background: linear-gradient(to left, rgba(255, 0, 0, 0.1), transparent);
        pointer-events: none;
        z-index: 2;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .results-container.scrolling:after {
        opacity: 1;
    }
</style>
{% endblock %}

{% block nav-global %}
<!-- –£–ë–ò–†–ê–ï–ú –í–°–ï –ö–ù–û–ü–ö–ò –ò–ó –®–ê–ü–ö–ò -->
{% endblock %}

{% block footer %}
{{ block.super }}
<script>
// JavaScript –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –∞–¥–º–∏–Ω–∫–æ–π
document.addEventListener('DOMContentLoaded', function() {
    console.log('Admin improvements script loaded');

    // 1. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ select
    document.querySelectorAll('select').forEach(select => {
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É –∏ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ
        select.style.height = '38px';
        select.style.lineHeight = '38px';
        select.style.paddingTop = '0';
        select.style.paddingBottom = '0';
        select.style.verticalAlign = 'middle';

        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–µ–ª–æ—á–∫—É –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
        if (!select.style.backgroundImage || select.style.backgroundImage === 'none') {
            select.style.backgroundImage = "url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"%23ffcc00\"%3e%3cpath d=\"M7 10l5 5 5-5z\"/%3e%3c/svg%3e')";
            select.style.backgroundRepeat = 'no-repeat';
            select.style.backgroundPosition = 'right 12px center';
            select.style.backgroundSize = '16px';
            select.style.paddingRight = '40px';
        }
    });

    // 2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ –ø–æ–∏—Å–∫–∞
    function adjustSearchLayout() {
        const searchInput = document.querySelector('#searchbar');
        const searchButton = document.querySelector('#changelist-search button[type="submit"]');

        if (searchInput && searchButton) {
            // –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ –¥–µ–ª–∞–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
            if (window.innerWidth >= 768) {
                const container = searchInput.parentElement;
                if (container) {
                    // –ó–∞–Ω–∏–º–∞–µ–º 70% —à–∏—Ä–∏–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞, 30% –¥–ª—è –∫–Ω–æ–ø–∫–∏
                    searchInput.style.flex = '3';
                    searchButton.style.flex = '1';
                    searchButton.style.minWidth = '120px';
                }
            }
        }
    }

    // 3. –£–ü–†–ê–©–ï–ù–ù–ê–Ø –≤–µ—Ä—Å–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ - –±–µ–∑ —Å–≤–µ—á–µ–Ω–∏—è
    function addTableScrollIndicators() {
        const tables = document.querySelectorAll('#result_list');
        tables.forEach(table => {
            const container = table.closest('.results');
            if (container) {
                // –£–±–∏—Ä–∞–µ–º –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
                const oldIndicators = container.querySelectorAll('.scroll-indicator-right, .scroll-indicator-left');
                oldIndicators.forEach(ind => ind.remove());

                // –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ —à–∏—Ä–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
                if (table.scrollWidth > container.clientWidth) {
                    // –î–æ–±–∞–≤–ª—è–µ–º –æ—á–µ–Ω—å —Ç–æ–Ω–∫–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–ø—Ä–∞–≤–∞ (–±–µ–∑ —Å–≤–µ—á–µ–Ω–∏—è)
                    const indicatorRight = document.createElement('div');
                    indicatorRight.className = 'scroll-indicator-right';
                    indicatorRight.style.cssText = `
                        position: absolute;
                        top: 0;
                        right: 0;
                        bottom: 0;
                        width: 15px;
                        background: linear-gradient(to right, transparent, rgba(255, 0, 0, 0.05));
                        pointer-events: none;
                        z-index: 2;
                        border-radius: 0 6px 6px 0;
                    `;
                    container.appendChild(indicatorRight);
                }
            }
        });
    }

    // 4. –í—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –æ—Ç—á–µ—Ç–∞—Ö
    function alignReportElements() {
        document.querySelectorAll('.report-filters select, .report-filters input').forEach(el => {
            el.style.height = '38px';
            el.style.lineHeight = '38px';
            el.style.minWidth = '220px';
        });
    }

    // 5. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
    function fixButtons() {
        document.querySelectorAll('.button, input[type="submit"], .btn').forEach(btn => {
            btn.style.display = 'inline-flex';
            btn.style.alignItems = 'center';
            btn.style.justifyContent = 'center';
            btn.style.height = '38px';
            btn.style.lineHeight = '1';
            btn.style.padding = '0 20px';
        });
    }

    // 6. –£–±–∏—Ä–∞–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
    function removeScrollGlow() {
        const resultsContainers = document.querySelectorAll('#changelist .results');
        resultsContainers.forEach(container => {
            // –£–±–∏—Ä–∞–µ–º –ª—é–±—ã–µ box-shadow —Å –±–æ–∫–æ–≤—ã—Ö —Å—Ç–æ—Ä–æ–Ω
            container.style.boxShadow = '0 5px 15px rgba(255, 0, 0, 0.15)';

            // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Å–∫—Ä–æ–ª–ª –∏ —É–±–∏—Ä–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            container.addEventListener('scroll', function() {
                // –ü—Ä–æ—Å—Ç–æ —É–±–∏—Ä–∞–µ–º –ª—é–±—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
                const indicators = this.querySelectorAll('.scroll-indicator-right, .scroll-indicator-left');
                indicators.forEach(ind => ind.style.opacity = '0.3');
            });
        });
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
    adjustSearchLayout();
    addTableScrollIndicators();
    alignReportElements();
    fixButtons();
    removeScrollGlow();

    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
    window.addEventListener('resize', function() {
        setTimeout(() => {
            adjustSearchLayout();
            addTableScrollIndicators();
            removeScrollGlow();
        }, 100);
    });

    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ AJAX –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.addedNodes.length) {
                setTimeout(() => {
                    adjustSearchLayout();
                    addTableScrollIndicators();
                    alignReportElements();
                    fixButtons();
                    removeScrollGlow();

                    // –ü–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏ –∫ select
                    document.querySelectorAll('select').forEach(select => {
                        select.style.height = '38px';
                        select.style.lineHeight = '38px';
                    });
                }, 300);
            }
        });
    });

    observer.observe(document.body, {
        childList: true,
        subtree: true
    });

    console.log('All admin improvements applied');
});
</script>
{% endblock %}