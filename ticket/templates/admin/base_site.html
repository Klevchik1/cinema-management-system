{% extends "admin/base.html" %}
{% load static %}

{% block title %}{% if subtitle %}{{ subtitle }} | {% endif %}{{ title }} | –ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä "–ü—Ä–µ–º—å–µ—Ä–∞"{% endblock %}

{% block branding %}
<h1 id="site-name">
    <a href="{% url 'admin:index' %}">
        üé¨ –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨
    </a>
</h1>
{% endblock %}

{% block extrastyle %}
{{ block.super }}
<style>
    /* ===== –û–°–ù–û–í–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ===== */
    :root {
        /* –¶–≤–µ—Ç–∞ –∏–∑ –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞ */
        --cinema-red: #ff0000;
        --cinema-dark-red: #cc0000;
        --cinema-yellow: #ffcc00;
        --cinema-purple: #4a00e0;
        --cinema-light-purple: #8e2de2;
        --cinema-black: #000000;
        --cinema-dark-gray: #222222;
        --cinema-card: rgba(30, 30, 30, 0.95);
        --cinema-white: #ffffff;
        --cinema-gray: #aaaaaa;

        /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Django */
        --primary: var(--cinema-red);
        --secondary: var(--cinema-purple);
        --accent: var(--cinema-yellow);
        --body-bg: var(--cinema-black);
        --body-fg: var(--cinema-white);
        --header-bg: rgba(20, 20, 20, 0.98);
        --header-color: var(--cinema-yellow);
        --header-link-color: var(--cinema-yellow);
        --breadcrumbs-bg: rgba(30, 30, 30, 0.9);
        --darkened-bg: rgba(40, 40, 40, 0.9);
        --border-color: var(--cinema-red);
        --button-bg: var(--cinema-red);
        --button-hover-bg: var(--cinema-dark-red);
        --default-button-bg: var(--cinema-purple);
        --default-button-hover-bg: var(--cinema-light-purple);
        --link-fg: var(--cinema-yellow);
        --link-hover-color: var(--cinema-red);
        --link-selected-fg: var(--cinema-white);
    }

    /* ===== –°–ë–†–û–° –ò –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò ===== */
    * {
        box-sizing: border-box;
    }

    body {
        background: linear-gradient(135deg, var(--cinema-black) 0%, var(--cinema-dark-gray) 100%) !important;
        color: var(--cinema-white) !important;
        font-family: 'Arial', sans-serif !important;
        font-size: 14px !important;
        line-height: 1.4 !important;
        min-height: 100vh;
        margin: 0;
        padding: 0;
    }

    /* ===== –®–ê–ü–ö–ê (–ò–°–ü–†–ê–í–õ–Ø–ï–ú) ===== */
    #header {
        background: var(--header-bg) !important;
        color: var(--cinema-yellow) !important;
        border-bottom: 2px solid var(--cinema-yellow) !important;
        height: 50px !important; /* –£–º–µ–Ω—å—à–∞–µ–º –≤—ã—Å–æ—Ç—É */
        padding: 0 20px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: space-between !important;
        box-shadow: 0 2px 10px rgba(255, 0, 0, 0.2) !important;
        position: relative !important;
        z-index: 1000 !important;
    }

    #branding {
        display: flex !important;
        align-items: center !important;
        height: 100% !important;
    }

    #site-name {
        margin: 0 !important;
        padding: 0 !important;
        font-size: 18px !important; /* –£–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑–º–µ—Ä */
        font-weight: bold !important;
        letter-spacing: 0.5px !important;
    }

    #site-name a {
        color: var(--cinema-yellow) !important;
        text-decoration: none !important;
        padding: 8px 15px !important;
        background: rgba(255, 0, 0, 0.2) !important;
        border-radius: 6px !important;
        border: 1px solid var(--cinema-yellow) !important;
        display: inline-block !important;
        transition: all 0.3s ease !important;
        line-height: 1.2 !important;
    }

    #site-name a:hover {
        background: rgba(255, 0, 0, 0.4) !important;
        transform: translateY(-1px) !important;
        box-shadow: 0 3px 8px rgba(255, 0, 0, 0.3) !important;
    }

    /* ===== –£–ë–ò–†–ê–ï–ú –õ–ò–®–ù–ò–ï –ö–ù–û–ü–ö–ò –í –®–ê–ü–ö–ï ===== */
    #header #user-tools {
        margin: 0 !important;
        padding: 0 !important;
        font-size: 12px !important;
        text-align: right !important;
    }

    #header #user-tools br {
        display: none !important;
    }

    #header #user-tools a {
        color: var(--cinema-yellow) !important;
        text-decoration: none !important;
        padding: 5px 10px !important;
        background: rgba(255, 0, 0, 0.2) !important;
        border-radius: 4px !important;
        margin-left: 5px !important;
        font-size: 12px !important;
        display: inline-block !important;
        line-height: 1.2 !important;
        border: 1px solid transparent !important;
        transition: all 0.3s ease !important;
    }

    #header #user-tools a:hover {
        background: rgba(255, 0, 0, 0.4) !important;
        border-color: var(--cinema-yellow) !important;
    }

    /* ===== –£–ë–ò–†–ê–ï–ú –ö–ù–û–ü–ö–£ –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –¢–ï–ú ===== */
    #header #toggle-theme,
    #header .theme-toggle,
    #header a[href*="theme"] {
        display: none !important;
    }

    /* ===== –ë–û–ö–û–í–û–ï –ú–ï–ù–Æ (–ù–ê–í–ò–ì–ê–¶–ò–Ø) ===== */
    #nav-sidebar {
        background: var(--cinema-card) !important;
        border-right: 2px solid var(--cinema-red) !important;
        padding: 15px 0 !important;
        width: 220px !important;
        box-shadow: 2px 0 10px rgba(255, 0, 0, 0.1) !important;
    }

    #nav-sidebar .module {
        background: transparent !important;
        border: none !important;
        margin: 0 0 15px 0 !important;
        padding: 0 !important;
        box-shadow: none !important;
    }

    #nav-sidebar .module h2 {
        background: linear-gradient(135deg, var(--cinema-red) 0%, var(--cinema-dark-red) 100%) !important;
        color: var(--cinema-white) !important;
        padding: 10px 15px !important;
        margin: 0 0 5px 0 !important;
        border: none !important;
        border-radius: 0 !important;
        font-size: 13px !important;
        font-weight: bold !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
    }

    #nav-sidebar .module ul {
        padding: 0 !important;
        margin: 0 !important;
    }

    #nav-sidebar .module li {
        list-style: none !important;
        margin: 0 !important;
    }

    #nav-sidebar .module li a {
        color: var(--cinema-gray) !important;
        text-decoration: none !important;
        padding: 8px 15px !important;
        display: block !important;
        transition: all 0.2s ease !important;
        border-left: 3px solid transparent !important;
        font-size: 13px !important;
        line-height: 1.3 !important;
    }

    #nav-sidebar .module li a:hover {
        color: var(--cinema-yellow) !important;
        background: rgba(255, 0, 0, 0.1) !important;
        border-left-color: var(--cinema-yellow) !important;
    }

    #nav-sidebar .module li.selected a {
        color: var(--cinema-yellow) !important;
        background: rgba(255, 0, 0, 0.2) !important;
        border-left-color: var(--cinema-red) !important;
        font-weight: bold !important;
    }

    /* ===== –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ ===== */
    #content {
        padding: 20px !important;
        margin: 0 !important;
        min-height: calc(100vh - 50px) !important;
    }

    #content-main {
        background: var(--cinema-card) !important;
        border: 2px solid var(--cinema-red) !important;
        border-radius: 10px !important;
        padding: 20px !important;
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.2) !important;
        margin-bottom: 20px !important;
    }

    /* ===== –ö–ù–û–ü–ö–ò (–ò–°–ü–†–ê–í–õ–Ø–ï–ú –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –¢–ï–ö–°–¢–ê) ===== */
    .button, input[type="submit"], input[type="button"],
    .submit-row input, a.button, .btn {
        background: linear-gradient(135deg, var(--cinema-red) 0%, var(--cinema-dark-red) 100%) !important;
        color: var(--cinema-white) !important;
        border: none !important;
        border-radius: 6px !important;
        padding: 8px 16px !important;
        font-size: 13px !important;
        font-weight: bold !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
        cursor: pointer !important;
        text-decoration: none !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        height: 36px !important;
        line-height: 1 !important;
        vertical-align: middle !important;
        transition: all 0.3s ease !important;
        box-shadow: 0 2px 5px rgba(255, 0, 0, 0.3) !important;
        margin: 2px !important;
        min-width: 80px !important;
    }

    .button:hover, input[type="submit"]:hover, input[type="button"]:hover,
    a.button:hover, .submit-row input:hover {
        background: linear-gradient(135deg, var(--cinema-dark-red) 0%, #990000 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 4px 10px rgba(255, 0, 0, 0.4) !important;
    }

    .button.default, input[type="submit"].default {
        background: linear-gradient(135deg, var(--cinema-purple) 0%, var(--cinema-light-purple) 100%) !important;
    }

    .button.default:hover, input[type="submit"].default:hover {
        background: linear-gradient(135deg, #3a00b0 0%, #6e1dc2 100%) !important;
    }

    /* ===== –í–´–ü–ê–î–ê–Æ–©–ò–ï –°–ü–ò–°–ö–ò –ò –ö–ù–û–ü–ö–ò –° –ú–ï–ù–Æ ===== */
    .selector {
        background: rgba(20, 20, 20, 0.9) !important;
        border: 2px solid var(--cinema-red) !important;
        border-radius: 6px !important;
        padding: 5px !important;
        margin: 5px 0 !important;
    }

    .selector select {
        background: transparent !important;
        color: var(--cinema-white) !important;
        border: none !important;
        padding: 8px !important;
        width: 100% !important;
    }

    /* –ö–Ω–æ–ø–∫–∏ —Å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–º (–≤—ã–ø–∞–¥–∞—é—â–∏–µ) */
    .selector .selector-chooseall,
    .selector .selector-clearall {
        background: rgba(255, 0, 0, 0.3) !important;
        color: var(--cinema-yellow) !important;
        border: 1px solid var(--cinema-yellow) !important;
        border-radius: 4px !important;
        padding: 4px 8px !important;
        font-size: 11px !important;
        margin: 2px !important;
    }

    /* ===== –§–û–†–ú–´ ===== */
    .form-row {
        padding: 10px 0 !important;
        border-bottom: 1px solid rgba(255, 0, 0, 0.1) !important;
    }

    .form-row:last-child {
        border-bottom: none !important;
    }

    label {
        color: var(--cinema-yellow) !important;
        font-weight: bold !important;
        font-size: 13px !important;
        margin-bottom: 5px !important;
        display: block !important;
    }

    input[type="text"], input[type="password"], input[type="email"],
    input[type="number"], input[type="date"], input[type="time"],
    select, textarea {
        background: rgba(20, 20, 20, 0.9) !important;
        border: 2px solid var(--cinema-red) !important;
        color: var(--cinema-white) !important;
        border-radius: 6px !important;
        padding: 8px 12px !important;
        font-size: 13px !important;
        width: 100% !important;
        max-width: 400px !important;
        transition: all 0.3s ease !important;
    }

    input:focus, select:focus, textarea:focus {
        border-color: var(--cinema-yellow) !important;
        outline: none !important;
        box-shadow: 0 0 8px rgba(255, 204, 0, 0.3) !important;
    }

    /* ===== –¢–ê–ë–õ–ò–¶–´ ===== */
    #changelist {
        background: transparent !important;
        border: none !important;
        box-shadow: none !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    #changelist .results {
        background: var(--cinema-card) !important;
        border: 2px solid var(--cinema-red) !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        margin-bottom: 20px !important;
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.2) !important;
    }

    #result_list {
        width: 100% !important;
        border-collapse: collapse !important;
    }

    #result_list thead th {
        background: linear-gradient(135deg, #222 0%, #333 100%) !important;
        color: var(--cinema-yellow) !important;
        padding: 12px 15px !important;
        border-bottom: 2px solid var(--cinema-red) !important;
        font-weight: bold !important;
        text-transform: uppercase !important;
        font-size: 12px !important;
        text-align: left !important;
    }

    #result_list tbody td, #result_list tbody th {
        padding: 10px 15px !important;
        border-bottom: 1px solid rgba(255, 0, 0, 0.1) !important;
        color: var(--cinema-white) !important;
        font-size: 13px !important;
        vertical-align: middle !important;
    }

    #result_list tbody tr:hover {
        background: rgba(255, 0, 0, 0.05) !important;
    }

    /* ===== –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ –§–ò–õ–¨–¢–†–û–í ===== */
    #changelist-filter {
        background: var(--cinema-card) !important;
        border: 2px solid var(--cinema-red) !important;
        border-radius: 8px !important;
        padding: 15px !important;
        margin: 0 0 20px 20px !important;
        width: 250px !important;
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.2) !important;
    }

    #changelist-filter h2 {
        background: linear-gradient(135deg, var(--cinema-red) 0%, var(--cinema-dark-red) 100%) !important;
        color: var(--cinema-white) !important;
        padding: 10px !important;
        margin: -15px -15px 15px -15px !important;
        border-radius: 6px 6px 0 0 !important;
        font-size: 14px !important;
        font-weight: bold !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
    }

    /* ===== –°–û–û–ë–©–ï–ù–ò–Ø ===== */
    .messagelist {
        margin: 0 0 20px 0 !important;
        padding: 0 !important;
    }

    .messagelist li {
        background: rgba(255, 0, 0, 0.2) !important;
        border: 1px solid var(--cinema-red) !important;
        color: var(--cinema-white) !important;
        border-radius: 6px !important;
        padding: 12px 15px !important;
        margin: 0 0 10px 0 !important;
        list-style: none !important;
        font-size: 13px !important;
    }

    .messagelist li.success {
        background: rgba(76, 175, 80, 0.2) !important;
        border-color: #4CAF50 !important;
    }

    .messagelist li.warning {
        background: rgba(255, 152, 0, 0.2) !important;
        border-color: #ff9800 !important;
    }

    .messagelist li.error {
        background: rgba(244, 67, 54, 0.2) !important;
        border-color: #f44336 !important;
    }

    /* ===== –•–õ–ï–ë–ù–´–ï –ö–†–û–®–ö–ò ===== */
    .breadcrumbs {
        background: rgba(30, 30, 30, 0.9) !important;
        border: 1px solid var(--cinema-red) !important;
        border-radius: 6px !important;
        padding: 10px 15px !important;
        margin: 0 0 20px 0 !important;
        color: var(--cinema-yellow) !important;
        font-size: 12px !important;
    }

    .breadcrumbs a {
        color: var(--cinema-yellow) !important;
        text-decoration: none !important;
        font-weight: bold !important;
    }

    .breadcrumbs a:hover {
        color: var(--cinema-red) !important;
        text-decoration: underline !important;
    }

    /* ===== OBJECT TOOLS (–∫–Ω–æ–ø–∫–∏ –Ω–∞–¥ —Ç–∞–±–ª–∏—Ü–µ–π) ===== */
    .object-tools {
        margin: 0 0 20px 0 !important;
        padding: 0 !important;
    }

    .object-tools li {
        display: inline-block !important;
        margin: 0 5px 5px 0 !important;
    }

    /* ===== –£–ë–ò–†–ê–ï–ú –í–°–ï –õ–ò–®–ù–ò–ï –ö–ù–û–ü–ö–ò –ò –°–°–´–õ–ö–ò ===== */
    #header a[href*="backup_management"],
    #header a[href="/"],
    #header a.backup-link {
        display: none !important;
    }

    /* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ===== */
    @media (max-width: 768px) {
        #header {
            height: auto !important;
            padding: 10px !important;
            flex-direction: column !important;
        }

        #branding {
            margin-bottom: 10px !important;
        }

        #nav-sidebar {
            width: 100% !important;
            margin-bottom: 20px !important;
        }

        #changelist-filter {
            width: 100% !important;
            margin: 0 0 20px 0 !important;
        }
    }
</style>
{% endblock %}

{% block nav-global %}
<!-- –£–ë–ò–†–ê–ï–ú –í–°–ï –ö–ù–û–ü–ö–ò –ò–ó –®–ê–ü–ö–ò -->
{% endblock %}

{% block footer %}
{{ block.super }}
<script>
// –£–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é
document.addEventListener('DOMContentLoaded', function() {
    // –£–¥–∞–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Ç–µ–º—ã
    const themeBtn = document.querySelector('#toggle-theme, .theme-toggle, a[href*="theme"]');
    if (themeBtn) themeBtn.remove();

    // –£–¥–∞–ª—è–µ–º –≤—Å–µ –ª–∏—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –∏–∑ —à–∞–ø–∫–∏
    const headerLinks = document.querySelectorAll('#header a');
    headerLinks.forEach(link => {
        if (link.href.includes('backup_management') ||
            link.textContent.includes('–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ') ||
            link.textContent.includes('–ù–∞ –≥–ª–∞–≤–Ω—ã–π') ||
            link.textContent.includes('–ù–∞ –≥–ª–∞–≤–Ω—É—é')) {
            link.style.display = 'none';
        }
    });

    // –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –≤—ã—Å–æ—Ç—É –∫–Ω–æ–ø–æ–∫
    document.querySelectorAll('.button, input[type="submit"], a.button').forEach(btn => {
        btn.style.display = 'inline-flex';
        btn.style.alignItems = 'center';
        btn.style.justifyContent = 'center';
        btn.style.height = '36px';
        btn.style.lineHeight = '1';
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫–∏ –∫ –≤—ã–ø–∞–¥–∞—é—â–∏–º —Å–ø–∏—Å–∫–∞–º
    document.querySelectorAll('select').forEach(select => {
        const wrapper = select.parentElement;
        if (wrapper && !wrapper.classList.contains('has-icon')) {
            wrapper.classList.add('has-icon');
            wrapper.style.position = 'relative';

            const icon = document.createElement('span');
            icon.innerHTML = '‚ñº';
            icon.style.position = 'absolute';
            icon.style.right = '10px';
            icon.style.top = '50%';
            icon.style.transform = 'translateY(-50%)';
            icon.style.color = '#ffcc00';
            icon.style.pointerEvents = 'none';
            wrapper.appendChild(icon);
        }
    });
});
</script>
{% endblock %}