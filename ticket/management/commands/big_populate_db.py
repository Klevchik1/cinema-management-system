from django.core.management.base import BaseCommand
from django.utils import timezone
from datetime import timedelta, datetime, time
import random
from faker import Faker
import os
from django.core.files import File
from django.conf import settings
from django.db.models import Q
from rest_framework.exceptions import ValidationError

# –î–û–ë–ê–í–õ–Ø–ï–ú –ò–ú–ü–û–†–¢ –ú–û–î–ï–õ–ò TicketStatus
from ticket.models import Hall, Movie, Screening, Seat, User, Genre, AgeRating, TicketStatus

fake = Faker('ru_RU')


class Command(BaseCommand):
    help = '–ó–∞–ø–æ–ª–Ω—è–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–∞'

    def handle(self, *args, **options):
        self.clear_old_data()
        self.create_admin()
        self.create_ticket_statuses()  # –î–û–ë–ê–í–õ–Ø–ï–ú –°–û–ó–î–ê–ù–ò–ï –°–¢–ê–¢–£–°–û–í –ë–ò–õ–ï–¢–û–í
        genres = self.create_genres()  # —Å–æ–∑–¥–∞–µ–º –∂–∞–Ω—Ä—ã –ø–µ—Ä–≤—ã–º–∏
        age_ratings = self.create_age_ratings()  # —Å–æ–∑–¥–∞–µ–º –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∏
        halls = self.create_halls()
        movies = self.create_movies(genres, age_ratings)  # –ø–µ—Ä–µ–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä–∏ –∂–∞–Ω—Ä–æ–≤ –∏ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
        self.create_screenings(halls, movies)

        self.stdout.write(self.style.SUCCESS('‚úÖ –ë–∞–∑–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏!'))

    def clear_old_data(self):
        """–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∫—Ä–æ–º–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)"""
        Screening.objects.all().delete()
        Seat.objects.all().delete()
        Movie.objects.all().delete()
        AgeRating.objects.all().delete()
        Hall.objects.all().delete()
        Genre.objects.all().delete()
        TicketStatus.objects.all().delete()

    def create_ticket_statuses(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –±–∏–ª–µ—Ç–æ–≤ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –≤–æ–∑–≤—Ä–∞—Ç–æ–≤"""
        self.stdout.write('–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –±–∏–ª–µ—Ç–æ–≤...')

        statuses = [
            {
                'code': 'active',
                'name': '–ê–∫—Ç–∏–≤–Ω—ã–π',
                'description': '–ë–∏–ª–µ—Ç –∞–∫—Ç–∏–≤–µ–Ω –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω',
                'is_active': True,
                'can_be_refunded': True
            },
            {
                'code': 'refund_requested',
                'name': '–ó–∞–ø—Ä–æ—à–µ–Ω –≤–æ–∑–≤—Ä–∞—Ç',
                'description': '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª –≤–æ–∑–≤—Ä–∞—Ç –±–∏–ª–µ—Ç–∞',
                'is_active': True,
                'can_be_refunded': False
            },
            {
                'code': 'refunded',
                'name': '–í–æ–∑–≤—Ä–∞—â–µ–Ω',
                'description': '–ë–∏–ª–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω, –¥–µ–Ω—å–≥–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã',
                'is_active': True,
                'can_be_refunded': False
            },
            {
                'code': 'used',
                'name': '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω',
                'description': '–ë–∏–ª–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –Ω–∞ —Å–µ–∞–Ω—Å–µ',
                'is_active': True,
                'can_be_refunded': False
            },
            {
                'code': 'cancelled',
                'name': '–û—Ç–º–µ–Ω–µ–Ω',
                'description': '–ë–∏–ª–µ—Ç –æ—Ç–º–µ–Ω–µ–Ω (—Å–µ–∞–Ω—Å –æ—Ç–º–µ–Ω–µ–Ω)',
                'is_active': True,
                'can_be_refunded': False
            },
            {
                'code': 'expired',
                'name': '–ü—Ä–æ—Å—Ä–æ—á–µ–Ω',
                'description': '–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –±–∏–ª–µ—Ç–∞ –∏—Å—Ç–µ–∫',
                'is_active': True,
                'can_be_refunded': False
            }
        ]

        created_count = 0
        updated_count = 0

        for status_data in statuses:
            obj, created = TicketStatus.objects.update_or_create(
                code=status_data['code'],
                defaults=status_data
            )
            if created:
                created_count += 1
                self.stdout.write(self.style.SUCCESS(f'‚úÖ –°–æ–∑–¥–∞–Ω —Å—Ç–∞—Ç—É—Å: {status_data["code"]} - {status_data["name"]}'))
            else:
                updated_count += 1
                self.stdout.write(
                    self.style.WARNING(f'üìù –û–±–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å: {status_data["code"]} - {status_data["name"]}'))

        self.stdout.write(
            self.style.SUCCESS(
                f'‚úÖ –°—Ç–∞—Ç—É—Å—ã –±–∏–ª–µ—Ç–æ–≤ –≥–æ—Ç–æ–≤—ã! –°–æ–∑–¥–∞–Ω–æ: {created_count}, –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}, –í—Å–µ–≥–æ: {TicketStatus.objects.count()}'
            )
        )

    def create_admin(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç"""
        if not User.objects.filter(email='admin@example.com').exists():
            admin = User.objects.create_superuser(
                email='admin@example.com',
                password='admin',
                name='–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
                surname='–°–∏—Å—Ç–µ–º—ã',
                number='+79001234567'
            )
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: {admin.email}'))
        else:
            self.stdout.write(self.style.SUCCESS('–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç'))

    def create_age_ratings(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã—Ö —Ä–µ–π—Ç–∏–Ω–≥–æ–≤"""
        age_ratings_data = [
            {
                'name': '0+',
                'description': '–§–∏–ª—å–º —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑—Ä–∞—Å—Ç–æ–≤'
            },
            {
                'name': '6+',
                'description': '–§–∏–ª—å–º —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è –¥–µ—Ç–µ–π —Å—Ç–∞—Ä—à–µ 6 –ª–µ—Ç'
            },
            {
                'name': '12+',
                'description': '–§–∏–ª—å–º —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è –¥–µ—Ç–µ–π —Å—Ç–∞—Ä—à–µ 12 –ª–µ—Ç'
            },
            {
                'name': '16+',
                'description': '–§–∏–ª—å–º —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è –¥–µ—Ç–µ–π —Å—Ç–∞—Ä—à–µ 16 –ª–µ—Ç'
            },
            {
                'name': '18+',
                'description': '–§–∏–ª—å–º –∑–∞–ø—Ä–µ—â–µ–Ω –¥–ª—è –¥–µ—Ç–µ–π –º–ª–∞–¥—à–µ 18 –ª–µ—Ç'
            },
        ]

        created_age_ratings = {}
        for rating_data in age_ratings_data:
            rating, created = AgeRating.objects.get_or_create(
                name=rating_data['name'],
                defaults={'description': rating_data['description']}
            )
            created_age_ratings[rating_data['name']] = rating
            if created:
                self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ä–µ–π—Ç–∏–Ω–≥: {rating.name}'))

        return created_age_ratings

    def create_halls(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ 5 –∑–∞–ª–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏"""
        halls_data = [
            {
                'name': '–°—Ç–∞–Ω–¥–∞—Ä—Ç',
                'rows': 10,
                'seats_per_row': 15,
                'description': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∫–∏–Ω–æ–∑–∞–ª —Å –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–º–∏ —Ç–∫–∞–Ω–µ–≤—ã–º–∏ –∫—Ä–µ—Å–ª–∞–º–∏, —Å–∏—Å—Ç–µ–º–æ–π –∑–≤—É–∫–∞ Dolby Digital –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ—Ä–æ–º. –ò–¥–µ–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∏–ª—å–º–æ–≤ –ª—é–±–æ–≥–æ –∂–∞–Ω—Ä–∞.'
            },
            {
                'name': 'VIP –ó–∞–ª',
                'rows': 6,
                'seats_per_row': 8,
                'description': '–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–π –∑–∞–ª —Å –∫–æ–∂–∞–Ω—ã–º–∏ –∫—Ä–µ—Å–ª–∞–º–∏-—Ä–µ–∫–ª–∞–π–Ω–µ—Ä–∞–º–∏, —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ–º –º–µ–∂–¥—É —Ä—è–¥–∞–º–∏, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ —Å—Ç–æ–ª–∏–∫–∞–º–∏ –¥–ª—è –Ω–∞–ø–∏—Ç–∫–æ–≤ –∏ –∑–∞–∫—É—Å–æ–∫. –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–æ–º.'
            },
            {
                'name': 'Love Hall',
                'rows': 5,
                'seats_per_row': 6,
                'description': '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ª —Å –¥–≤—É—Ö–º–µ—Å—Ç–Ω—ã–º–∏ –¥–∏–≤–∞–Ω–∞–º–∏ –≤–º–µ—Å—Ç–æ –∫—Ä–µ—Å–µ–ª. 1 –±–∏–ª–µ—Ç = –¥–∏–≤–∞–Ω –Ω–∞ –¥–≤—É—Ö —á–µ–ª–æ–≤–µ–∫. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ø–∞—Ä: —É—é—Ç–Ω—ã–µ –ø–ª–µ–¥—ã, –ø—Ä–∏–≥–ª—É—à–µ–Ω–Ω—ã–π —Å–≤–µ—Ç –∏ –∏–Ω—Ç–∏–º–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞.'
            },
            {
                'name': '–ö–æ–º—Ñ–æ—Ä—Ç',
                'rows': 7,
                'seats_per_row': 10,
                'description': '–ó–∞–ª —Å –º—è–≥–∫–∏–º–∏ –±–µ—Å–∫–∞—Ä–∫–∞—Å–Ω—ã–º–∏ –∫—Ä–µ—Å–ª–∞–º–∏-–ø–æ–¥—É—à–∫–∞–º–∏ –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω—ã—Ö –∫—Ä–µ—Å–µ–ª. –†–∞—Å—Å–ª–∞–±–ª—è—é—â–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞, –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤.'
            },
            {
                'name': 'IMAX',
                'rows': 12,
                'seats_per_row': 18,
                'description': '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç IMAX —Å –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–º –∏–∑–æ–≥–Ω—É—Ç—ã–º —ç–∫—Ä–∞–Ω–æ–º, –ª–∞–∑–µ—Ä–Ω–æ–π –ø—Ä–æ–µ–∫—Ü–∏–µ–π –∏ 12-–∫–∞–Ω–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∑–≤—É–∫–∞. –ü–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ —Ñ–∏–ª—å–º –Ω–∞ 100%.'
            }
        ]

        halls = []
        for data in halls_data:
            hall = Hall.objects.create(
                name=data['name'],
                rows=data['rows'],
                seats_per_row=data['seats_per_row'],
                description=data['description']
            )
            halls.append(hall)
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω –∑–∞–ª: {hall.name}'))

        return halls

    def create_genres(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∂–∞–Ω—Ä–æ–≤ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏"""
        genres = [
            '–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞', '–ö–æ–º–µ–¥–∏—è', '–ë–æ–µ–≤–∏–∫', '–î—Ä–∞–º–∞', '–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è',
            '–ë–∏–æ–≥—Ä–∞—Ñ–∏—è', '–ú—É–ª—å—Ç—Ñ–∏–ª—å–º', '–£–∂–∞—Å—ã', '–¢—Ä–∏–ª–ª–µ—Ä', '–ú–µ–ª–æ–¥—Ä–∞–º–∞'
        ]

        created_genres = {}
        for genre_name in genres:
            # –ü—Ä–∏–≤–æ–¥–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –≤–∏–¥—É (–ø–µ—Ä–≤–∞—è –∑–∞–≥–ª–∞–≤–Ω–∞—è)
            genre_name = genre_name.strip().title()
            genre, created = Genre.objects.get_or_create(name=genre_name)
            created_genres[genre_name] = genre
            if created:
                self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω –∂–∞–Ω—Ä: {genre_name}'))
            else:
                self.stdout.write(self.style.WARNING(f'–ñ–∞–Ω—Ä —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {genre_name}'))

        return created_genres

    def create_movies(self, genres, age_ratings):
        """–°–æ–∑–¥–∞–Ω–∏–µ 12 —Ñ–∏–ª—å–º–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –∏ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–º–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏"""
        posters_dir = os.path.join(settings.BASE_DIR, 'ticket', 'management', 'commands', 'posters')

        # –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤ —Å –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–º–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏
        movies_data = [
            {
                'title': '–ê–≤–∞—Ç–∞—Ä: –ü—É—Ç—å –≤–æ–¥—ã',
                'duration': 192,
                'genre': '–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
                'age_rating': '12+',
                'poster': 'avatar.jpg',
                'short_description': '–î–∂–µ–π–∫ –°–∞–ª–ª–∏ –∏ –ù–µ–π—Ç–∏—Ä–∏ —Å–æ–∑–¥–∞–ª–∏ —Å–µ–º—å—é, –Ω–æ –∏–º –≤–Ω–æ–≤—å —É–≥—Ä–æ–∂–∞—é—Ç –ª—é–¥–∏ —Å –ó–µ–º–ª–∏.',
                'description': '–ü—Ä–æ—à–ª–æ –±–æ–ª–µ–µ –¥–µ—Å—è—Ç–∏ –ª–µ—Ç –ø–æ—Å–ª–µ —Å–æ–±—ã—Ç–∏–π –ø–µ—Ä–≤–æ–≥–æ —Ñ–∏–ª—å–º–∞ "–ê–≤–∞—Ç–∞—Ä". –î–∂–µ–π–∫ –°–∞–ª–ª–∏ –∏ –ù–µ–π—Ç–∏—Ä–∏ —Å–æ–∑–¥–∞–ª–∏ —Å–µ–º—å—é –∏ –¥–µ–ª–∞—é—Ç –≤—Å—ë –≤–æ–∑–º–æ–∂–Ω–æ–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ. –û–¥–Ω–∞–∫–æ –∏–º –≤–Ω–æ–≤—å —É–≥—Ä–æ–∂–∞–µ—Ç –æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å –ó–µ–º–ª–∏. –ö–æ–≥–¥–∞ –¥—Ä–µ–≤–Ω–∏–µ –º–µ—Ç–∫–∏ —Å–Ω–æ–≤–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è, –î–∂–µ–π–∫ –¥–æ–ª–∂–µ–Ω –≤–µ—Å—Ç–∏ –≤–æ–π–Ω—É –ø—Ä–æ—Ç–∏–≤ –ª—é–¥–µ–π. –í –ø–æ–∏—Å–∫–∞—Ö —É–±–µ–∂–∏—â–∞ —Å–µ–º—å—è –°–∞–ª–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–≥–∏–æ–Ω—ã –ü–∞–Ω–¥–æ—Ä—ã, –Ω–∞—Å–µ–ª—ë–Ω–Ω—ã–µ –¥—Ä—É–≥–∏–º–∏ –∫–ª–∞–Ω–∞–º–∏ –ù–∞\'–≤–∏. –ñ–∏–≤—è —Å—Ä–µ–¥–∏ –Ω–æ–≤–æ–≥–æ –ø–ª–µ–º–µ–Ω–∏, –æ–Ω–∏ —É—á–∞—Ç—Å—è –∂–∏—Ç—å –∏ –≤—ã–∂–∏–≤–∞—Ç—å –≤ –≤–æ–¥–Ω–æ–π —Å—Ä–µ–¥–µ, –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≥–æ—Ç–æ–≤—è—Å—å –∫ –Ω–µ–∏–∑–±–µ–∂–Ω–æ–π –±–∏—Ç–≤–µ, –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –±—É–¥—É—â–µ–µ –ü–∞–Ω–¥–æ—Ä—ã.'
            },
            {
                'title': '–û–¥–∏–Ω –¥–æ–º–∞',
                'duration': 103,
                'genre': '–ö–æ–º–µ–¥–∏—è',
                'age_rating': '6+',
                'poster': 'home_alone.jpg',
                'short_description': '8-–ª–µ—Ç–Ω–∏–π –ö–µ–≤–∏–Ω —Å–ª—É—á–∞–π–Ω–æ –æ—Å—Ç–∞–µ—Ç—Å—è –æ–¥–∏–Ω –¥–æ–º–∞ –∏ –∑–∞—â–∏—â–∞–µ—Ç —Å–≤–æ–π –¥–æ–º –æ—Ç –≥—Ä–∞–±–∏—Ç–µ–ª–µ–π.',
                'description': '–°–µ–º—å—è –ú–∞–∫–∫–∞–ª–ª–∏—Å—Ç–µ—Ä–æ–≤ –≤ —Å–ø–µ—à–∫–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ —Ä–æ–∂–¥–µ—Å—Ç–≤–µ–Ω—Å–∫–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –ü–∞—Ä–∏–∂. –í —Å—É–º–∞—Ç–æ—Ö–µ –æ–Ω–∏ –∑–∞–±—ã–≤–∞—é—Ç –¥–æ–º–∞ —Å–≤–æ–µ–≥–æ –≤–æ—Å—å–º–∏–ª–µ—Ç–Ω–µ–≥–æ —Å—ã–Ω–∞ –ö–µ–≤–∏–Ω–∞. –ü–æ–Ω–∞—á–∞–ª—É –º–∞–ª—å—á–∏–∫ —Ä–∞–¥ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∂–∏—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ: –æ–Ω –µ—Å—Ç —Å–ª–∞–¥–æ—Å—Ç–∏, —Å–º–æ—Ç—Ä–∏—Ç –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Ñ–∏–ª—å–º—ã –∏ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –±–µ—Å–ø–æ—Ä—è–¥–æ–∫. –ù–æ –≤—Å–∫–æ—Ä–µ –æ–Ω –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç, —á—Ç–æ –µ–≥–æ –¥–æ–º —Å—Ç–∞–ª –º–∏—à–µ–Ω—å—é –¥–ª—è –¥–≤—É—Ö –Ω–µ–∑–∞–¥–∞—á–ª–∏–≤—ã—Ö –≥—Ä–∞–±–∏—Ç–µ–ª–µ–π ‚Äî –ì–∞—Ä—Ä–∏ –∏ –ú–∞—Ä–≤–∞. –ò—Å–ø–æ–ª—å–∑—É—è –≤—Å—é —Å–≤–æ—é —Å–º–µ–∫–∞–ª–∫—É, –ö–µ–≤–∏–Ω –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –¥–æ–º –≤ –∫—Ä–µ–ø–æ—Å—Ç—å —Å —Ö–∏—Ç—Ä–æ—É–º–Ω—ã–º–∏ –ª–æ–≤—É—à–∫–∞–º–∏, —á—Ç–æ–±—ã –¥–∞—Ç—å –æ—Ç–ø–æ—Ä –Ω–µ–ø—Ä–æ—à–µ–Ω—ã–º –≥–æ—Å—Ç—è–º –≤ –∫–∞–Ω—É–Ω –†–æ–∂–¥–µ—Å—Ç–≤–∞.'
            },
            {
                'title': '–ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä',
                'duration': 169,
                'genre': '–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
                'age_rating': '12+',
                'poster': 'interstellar.jpg',
                'short_description': '–ö–æ–º–∞–Ω–¥–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–≤–µ—Ä—à–∞–µ—Ç –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ —á–µ—Ä–≤–æ—Ç–æ—á–∏–Ω—É –≤ –ø–æ–∏—Å–∫–∞—Ö –Ω–æ–≤–æ–≥–æ –¥–æ–º–∞ –¥–ª—è —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞.',
                'description': '–í –Ω–µ–¥–∞–ª—ë–∫–æ–º –±—É–¥—É—â–µ–º –∏–∑-–∑–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–µ–ø–ª–µ–Ω–∏—è –∏ –ø—ã–ª—å–Ω—ã—Ö –±—É—Ä—å —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–¥–æ–ª—å—Å—Ç–≤–µ–Ω–Ω—ã–π –∫—Ä–∏–∑–∏—Å. –ë—ã–≤—à–∏–π –ø–∏–ª–æ—Ç –ù–ê–°–ê –ö—É–ø–µ—Ä –≤–µ–¥—ë—Ç —Ñ–µ—Ä–º–µ—Ä—Å–∫–æ–µ —Ö–æ–∑—è–π—Å—Ç–≤–æ –≤–º–µ—Å—Ç–µ —Å–æ —Å–≤–æ–µ–π —Å–µ–º—å—ë–π –≤ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–æ–π –≥–ª—É–±–∏–Ω–∫–µ. –ö–æ–≥–¥–∞ –µ–≥–æ –¥–æ—á—å –ú—ë—Ä—Ñ —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –≤ –µ—ë –∫–æ–º–Ω–∞—Ç–µ –∂–∏–≤—ë—Ç –ø—Ä–∏–∑—Ä–∞–∫, –ö—É–ø–µ—Ä –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –∞–Ω–æ–º–∞–ª–∏–∏ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –ø–æ—Å–ª–∞–Ω–∏–µ –æ—Ç –ø—Ä–∏—à–µ–ª—å—Ü–µ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞—é—Ç —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤—É —à–∞–Ω—Å –Ω–∞ —Å–ø–∞—Å–µ–Ω–∏–µ. –û–Ω –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ —Å–µ–∫—Ä–µ—Ç–Ω–æ–π —ç–∫—Å–ø–µ–¥–∏—Ü–∏–∏ –ù–ê–°–ê, —Ü–µ–ª—å—é –∫–æ—Ç–æ—Ä–æ–π —è–≤–ª—è–µ—Ç—Å—è –ø–æ–∏—Å–∫ –Ω–æ–≤–æ–≥–æ –¥–æ–º–∞ –¥–ª—è —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ —á–µ—Ä–≤–æ—Ç–æ—á–∏–Ω—É.'
            },
            {
                'title': '–û–ø–ø–µ–Ω–≥–µ–π–º–µ—Ä',
                'duration': 180,
                'genre': '–ë–∏–æ–≥—Ä–∞—Ñ–∏—è',
                'age_rating': '16+',
                'poster': 'oppenheimer.jpg',
                'short_description': '–ò—Å—Ç–æ—Ä–∏—è –∂–∏–∑–Ω–∏ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–æ–≥–æ —Ñ–∏–∑–∏–∫–∞ –†–æ–±–µ—Ä—Ç–∞ –û–ø–ø–µ–Ω–≥–µ–π–º–µ—Ä–∞, —Å–æ–∑–¥–∞—Ç–µ–ª—è –∞—Ç–æ–º–Ω–æ–π –±–æ–º–±—ã.',
                'description': '–§–∏–ª—å–º —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ –∂–∏–∑–Ω–∏ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–æ–≥–æ —Ñ–∏–∑–∏–∫–∞-—Ç–µ–æ—Ä–µ—Ç–∏–∫–∞ –†–æ–±–µ—Ä—Ç–∞ –û–ø–ø–µ–Ω–≥–µ–π–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–æ –≤—Ä–µ–º—è –í—Ç–æ—Ä–æ–π –º–∏—Ä–æ–≤–æ–π –≤–æ–π–Ω—ã —Ä—É–∫–æ–≤–æ–¥–∏–ª –ú–∞–Ω—Ö—ç—Ç—Ç–µ–Ω—Å–∫–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–æ–π –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∞—Ç–æ–º–Ω–æ–π –±–æ–º–±—ã. –ö–∞—Ä—Ç–∏–Ω–∞ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã –µ–≥–æ –∂–∏–∑–Ω–∏: —É—á—ë–±—É –≤ –ï–≤—Ä–æ–ø–µ, —Ä–∞–±–æ—Ç—É –≤ –ö–∞–ª–∏—Ñ–æ—Ä–Ω–∏–π—Å–∫–æ–º —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ –≤ –ë–µ—Ä–∫–ª–∏, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –õ–æ—Å-–ê–ª–∞–º–æ—Å—Å–∫–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–µ–π –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–ª—É—à–∞–Ω–∏—è –ø–æ –¥–æ–ø—É—Å–∫—É –∫ —Å–µ–∫—Ä–µ—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ 1954 –≥–æ–¥—É. –§–∏–ª—å–º –∏—Å—Å–ª–µ–¥—É–µ—Ç –º–æ—Ä–∞–ª—å–Ω—ã–µ –¥–∏–ª–µ–º–º—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —É—á—ë–Ω—ã–π, —Å–æ–∑–¥–∞–≤–∞—è –æ—Ä—É–∂–∏–µ –º–∞—Å—Å–æ–≤–æ–≥–æ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è.'
            },
            {
                'title': '–ë–∞—Ä–±–∏',
                'duration': 114,
                'genre': '–ö–æ–º–µ–¥–∏—è',
                'age_rating': '12+',
                'poster': 'barbie.jpg',
                'short_description': '–ö—É–∫–ª–∞ –ë–∞—Ä–±–∏ –∂–∏–≤–µ—Ç –≤ –∏–¥–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ, –Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç, —á—Ç–æ –µ—ë –º–∏—Ä –Ω–µ —Ç–∞–∫ –ø—Ä–µ–∫—Ä–∞—Å–µ–Ω.',
                'description': '–ö—É–∫–ª–∞ –ë–∞—Ä–±–∏ –∂–∏–≤—ë—Ç –≤ –∏–¥–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ –ë–∞—Ä–±–∏–ª–µ–Ω–¥–∞, –≥–¥–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî —Å–∞–º—ã–π –ª—É—á—à–∏–π. –û–¥–Ω–∞–∫–æ –æ–¥–Ω–∞–∂–¥—ã –æ–Ω–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–º–µ—á–∞—Ç—å —Å—Ç—Ä–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: –µ—ë —É—Ç—Ä–µ–Ω–Ω–∏–π —Ç–æ—Å—Ç –ø–æ–¥–≥–æ—Ä–∞–µ—Ç, –∞ –≤–æ –≤—Ä–µ–º—è –≤–µ—á–µ—Ä–∏–Ω–∫–∏ —É –±–∞—Å—Å–µ–π–Ω–∞ –æ–Ω–∞ –≤–Ω–µ–∑–∞–ø–Ω–æ –∑–∞–¥—É–º—ã–≤–∞–µ—Ç—Å—è –æ —Å–º–µ—Ä—Ç–∏. –ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é, –æ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω—ã–π –º–∏—Ä –≤–º–µ—Å—Ç–µ —Å –ö–µ–Ω–æ–º. –í —Ö–æ–¥–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –æ–Ω–∏ —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è —Å —Ä–∞–¥–æ—Å—Ç—è–º–∏ –∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏ –∂–∏–∑–Ω–∏ —Å—Ä–µ–¥–∏ –ª—é–¥–µ–π, —É–∑–Ω–∞—é—Ç —Ü–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç–æ—è—â–µ–π –¥—Ä—É–∂–±—ã –∏ —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –ø–æ–Ω–∏–º–∞—é—Ç, —á—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ ‚Äî —ç—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ç–æ, –∫ —á–µ–º—É –Ω—É–∂–Ω–æ —Å—Ç—Ä–µ–º–∏—Ç—å—Å—è.'
            },
            {
                'title': '–î–∂–æ–Ω –£–∏–∫ 4',
                'duration': 169,
                'genre': '–ë–æ–µ–≤–∏–∫',
                'age_rating': '18+',
                'poster': 'john_wick.jpg',
                'short_description': '–î–∂–æ–Ω –£–∏–∫ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø—É—Ç—å –∫ –ø–æ–±–µ–¥–µ –Ω–∞–¥ –ü—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ö–ª–∞–Ω–æ–≤.',
                'description': '–î–∂–æ–Ω –£–∏–∫ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å–≤–æ–π –ø—É—Ç—å –∫ —Å–≤–æ–±–æ–¥–µ, —Å—Ç–∞–ª–∫–∏–≤–∞—è—Å—å —Å –Ω–æ–≤—ã–º–∏ –≤—Ä–∞–≥–∞–º–∏ –∏ –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∞–ª—å—è–Ω—Å–∞–º–∏. –ù–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –µ–º—É –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Å—Ä–∞–∑–∏—Ç—å—Å—è —Å –ü—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ö–ª–∞–Ω–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–ª–æ –ø—Ä–æ—Ç–∏–≤ –Ω–µ–≥–æ –≤—Å–µ —Å–≤–æ–∏ —Å–∏–ª—ã. –ß—Ç–æ–±—ã –ø–æ–±–µ–¥–∏—Ç—å, –£–∏–∫ –¥–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏ —Å–ø–æ—Å–æ–± —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏–∑–Ω—É—Ç—Ä–∏. –ï–≥–æ –∂–¥—É—Ç —ç–ø–∏—á–µ—Å–∫–∏–µ —Å—Ä–∞–∂–µ–Ω–∏—è –≤ –ü–∞—Ä–∏–∂–µ, –ë–µ—Ä–ª–∏–Ω–µ, –ù—å—é-–ô–æ—Ä–∫–µ –∏ –û—Å–∞–∫–µ, –≥–¥–µ –æ–Ω —Å—Ç–æ–ª–∫–Ω—ë—Ç—Å—è —Å —Å–∞–º—ã–º–∏ –æ–ø–∞—Å–Ω—ã–º–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞–º–∏ –≤ —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏.'
            },
            {
                'title': '–°—Ç—Ä–∞–∂–∏ –ì–∞–ª–∞–∫—Ç–∏–∫–∏ 3',
                'duration': 150,
                'genre': '–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
                'age_rating': '16+',
                'poster': 'guardians.jpg',
                'short_description': '–ü–∏—Ç–µ—Ä –ö–≤–∏–ª–ª –≤—Å–µ –µ—â–µ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –ø–æ—Ç–µ—Ä—é –ì–∞–º–æ—Ä—ã –∏ –¥–æ–ª–∂–µ–Ω —Å–ø–ª–æ—Ç–∏—Ç—å —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É.',
                'description': '–ü–∏—Ç–µ—Ä –ö–≤–∏–ª–ª –≤—Å—ë –µ—â—ë –æ–ø–ª–∞–∫–∏–≤–∞–µ—Ç –ø–æ—Ç–µ—Ä—é –ì–∞–º–æ—Ä—ã –∏ –¥–æ–ª–∂–µ–Ω —Å–ø–ª–æ—Ç–∏—Ç—å —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É, —á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å –í—Å–µ–ª–µ–Ω–Ω—É—é –∏ –∑–∞—â–∏—Ç–∏—Ç—å –æ–¥–Ω–æ–≥–æ –∏–∑ —Å–≤–æ–∏—Ö. –í —ç—Ç–æ–π –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–π –≥–ª–∞–≤–µ –°—Ç—Ä–∞–∂–∏ –ì–∞–ª–∞–∫—Ç–∏–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –æ–ø–∞—Å–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ, —á—Ç–æ–±—ã —Ä–∞—Å–∫—Ä—ã—Ç—å —Ç–∞–π–Ω—ã –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è –†–∞–∫–µ—Ç—ã. –ü–æ –ø—É—Ç–∏ –æ–Ω–∏ —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è —Å –Ω–æ–≤—ã–º–∏ –∏ —Å—Ç–∞—Ä—ã–º–∏ –≤—Ä–∞–≥–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–≥—Ä–æ–∂–∞—é—Ç —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –∏—Ö –∏ –≤—Å—é –≥–∞–ª–∞–∫—Ç–∏–∫—É. –ö–æ–º–∞–Ω–¥–µ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –ø—Ä–æ–π—Ç–∏ —á–µ—Ä–µ–∑ —Å–∞–º—ã–µ —Ç—Ä—É–¥–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è, —á—Ç–æ–±—ã –æ—Å—Ç–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ.'
            },
            {
                'title': '–ß–µ–ª–æ–≤–µ–∫-–ø–∞—É–∫: –ü–∞—É—Ç–∏–Ω–∞ –≤—Å–µ–ª–µ–Ω–Ω—ã—Ö',
                'duration': 140,
                'genre': '–ú—É–ª—å—Ç—Ñ–∏–ª—å–º',
                'age_rating': '6+',
                'poster': 'spiderman.jpg',
                'short_description': '–ú–∞–π–ª–∑ –ú–æ—Ä–∞–ª–µ—Å –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è —á–µ—Ä–µ–∑ –ú—É–ª—å—Ç–∏–≤—Å–µ–ª–µ–Ω–Ω—É—é –∏ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –õ—é–¥–µ–π-–ø–∞—É–∫–æ–≤.',
                'description': '–ú–∞–π–ª–∑ –ú–æ—Ä–∞–ª–µ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–π –≥–ª–∞–≤–µ –æ—Å–∫–∞—Ä–æ–Ω–æ—Å–Ω–æ–π —Å–∞–≥–∏ "–ß–µ–ª–æ–≤–µ–∫-–ø–∞—É–∫: –ß–µ—Ä–µ–∑ –≤—Å–µ–ª–µ–Ω–Ω—ã–µ". –í–æ –≤—Ä–µ–º—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–æ –ú—É–ª—å—Ç–∏–≤—Å–µ–ª–µ–Ω–Ω–æ–π –æ–Ω –≤—Å—Ç—Ä–µ—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –õ—é–¥–µ–π-–ø–∞—É–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –∑–∞—â–∏—Ç–∏—Ç—å —Å–∞–º–æ –µ—ë —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ. –ö–æ–≥–¥–∞ –≥–µ—Ä–æ–∏ —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è —Å –Ω–æ–≤—ã–º –≤—Ä–∞–≥–æ–º, –ú–∞–π–ª–∑—É –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ–æ—Å–º—ã—Å–ª–∏—Ç—å –≤—Å—ë, —á—Ç–æ –∑–Ω–∞—á–∏—Ç –±—ã—Ç—å –≥–µ—Ä–æ–µ–º, —á—Ç–æ–±—ã —Å–ø–∞—Å—Ç–∏ –±–ª–∏–∑–∫–∏—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π. –§–∏–ª—å–º –∏—Å—Å–ª–µ–¥—É–µ—Ç –∏–¥–µ—é –æ —Ç–æ–º, —á—Ç–æ –ª—é–±–æ–π —á–µ–ª–æ–≤–µ–∫ –º–æ–∂–µ—Ç –Ω–∞–¥–µ—Ç—å –º–∞—Å–∫—É –∏ —Å—Ç–∞—Ç—å –≥–µ—Ä–æ–µ–º.'
            },
            {
                'title': '–ú–∏—Å—Å–∏—è –Ω–µ–≤—ã–ø–æ–ª–Ω–∏–º–∞ 7',
                'duration': 163,
                'genre': '–ë–æ–µ–≤–∏–∫',
                'age_rating': '12+',
                'poster': 'mission_impossible.jpg',
                'short_description': '–ò—Ç–∞–Ω –•–∞–Ω—Ç –∏ –µ–≥–æ –∫–æ–º–∞–Ω–¥–∞ –ú–í–§ –¥–æ–ª–∂–Ω—ã –æ—Ç—Å–ª–µ–¥–∏—Ç—å –Ω–æ–≤–æ–µ —É–∂–∞—Å–∞—é—â–µ–µ –æ—Ä—É–∂–∏–µ.',
                'description': '–ò—Ç–∞–Ω –•–∞–Ω—Ç –∏ –µ–≥–æ –∫–æ–º–∞–Ω–¥–∞ –ú–í–§ –¥–æ–ª–∂–Ω—ã –æ—Ç—Å–ª–µ–¥–∏—Ç—å –Ω–æ–≤–æ–µ —É–∂–∞—Å–∞—é—â–µ–µ –æ—Ä—É–∂–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É–≥—Ä–æ–∂–∞–µ—Ç –≤—Å–µ–º—É —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤—É, –µ—Å–ª–∏ –æ–Ω–æ –æ–∫–∞–∂–µ—Ç—Å—è –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ä—É–∫–∞—Ö. –° –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –Ω–∞–¥ –±—É–¥—É—â–∏–º –∏ —Å—É–¥—å–±–æ–π –º–∏—Ä–∞ –≤ —Å–≤–æ–∏—Ö —Ä—É–∫–∞—Ö, –∏ —Å —Ç–µ–º–Ω—ã–º–∏ —Å–∏–ª–∞–º–∏ –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ –ò—Ç–∞–Ω–∞, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–º–µ—Ä—Ç–µ–ª—å–Ω–∞—è –≥–æ–Ω–∫–∞ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É. –°—Ç–æ–ª–∫–Ω—É–≤—à–∏—Å—å —Å –∑–∞–≥–∞–¥–æ—á–Ω—ã–º –∏ –≤—Å–µ–º–æ–≥—É—â–∏–º –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–º, –ò—Ç–∞–Ω –≤—ã–Ω—É–∂–¥–µ–Ω —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ –Ω–∏—á—Ç–æ –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –±–æ–ª—å—à–µ, —á–µ–º –µ–≥–æ –º–∏—Å—Å–∏—è ‚Äî –¥–∞–∂–µ –∂–∏–∑–Ω–∏ —Ç–µ—Ö, –∫—Ç–æ –µ–º—É –¥–æ—Ä–æ–≥.'
            },
            {
                'title': '–ò–Ω–¥–∏–∞–Ω–∞ –î–∂–æ–Ω—Å –∏ —Ä–µ–ª–∏–∫–≤–∏—è —Å—É–¥—å–±—ã',
                'duration': 154,
                'genre': '–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è',
                'age_rating': '12+',
                'poster': 'indiana_jones.jpg',
                'short_description': '–ê—Ä—Ö–µ–æ–ª–æ–≥ –ò–Ω–¥–∏–∞–Ω–∞ –î–∂–æ–Ω—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–µ –æ–ø–∞—Å–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ.',
                'description': '–ê—Ä—Ö–µ–æ–ª–æ–≥ –ò–Ω–¥–∏–∞–Ω–∞ –î–∂–æ–Ω—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–µ –æ–ø–∞—Å–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –¥—Ä–µ–≤–Ω—é—é —Ä–µ–ª–∏–∫–≤–∏—é, –æ–±–ª–∞–¥–∞—é—â—É—é –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ–π —Å–∏–ª–æ–π. –î–µ–π—Å—Ç–≤–∏–µ —Ñ–∏–ª—å–º–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ 1969 –≥–æ–¥—É, –Ω–∞ —Ñ–æ–Ω–µ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π –≥–æ–Ω–∫–∏. –î–∂–æ–Ω—Å –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –µ–≥–æ –¥–∞–≤–Ω–æ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–π –ø–ª–µ–º—è–Ω–Ω–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∑–ª–æ–¥–µ–π—Å–∫—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–¥–µ–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö–æ–¥–∞ –∏—Å—Ç–æ—Ä–∏–∏. –ß—Ç–æ–±—ã —Å–æ—Ä–≤–∞—Ç—å –∏—Ö –ø–ª–∞–Ω—ã, –ò–Ω–¥–∏–∞–Ω–∞ –¥–æ–ª–∂–µ–Ω –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å—Å—è —Å–æ —Å–≤–æ–µ–π –∫—Ä–µ—Å—Ç–Ω–∏—Ü–µ–π –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–≤–µ–¥—ë—Ç –µ–≥–æ –≤ —Å–∞–º—ã–µ –æ—Ç–¥–∞–ª—ë–Ω–Ω—ã–µ —É–≥–æ–ª–∫–∏ –º–∏—Ä–∞.'
            },
            {
                'title': '–î—é–Ω–∞',
                'duration': 155,
                'genre': '–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
                'age_rating': '12+',
                'poster': 'dune.jpg',
                'short_description': '–ü–æ–ª –ê—Ç—Ä–µ–π–¥–µ—Å –≤–º–µ—Å—Ç–µ —Å —Å–µ–º—å–µ–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –æ–ø–∞—Å–Ω—É—é –ø–ª–∞–Ω–µ—Ç—É –ê—Ä—Ä–∞–∫–∏—Å.',
                'description': '–ü–æ–ª –ê—Ç—Ä–µ–π–¥–µ—Å –≤–º–µ—Å—Ç–µ —Å —Å–µ–º—å—ë–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –æ–ø–∞—Å–Ω—É—é –ø–ª–∞–Ω–µ—Ç—É –ê—Ä—Ä–∞–∫–∏—Å, –≥–¥–µ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –≤—Ä–∞–≥–∞–º–∏ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—É—Ç—å –∫ —Å–≤–æ–µ–π —Å—É–¥—å–±–µ. –ù–∞ —ç—Ç–æ–π –ø—É—Å—Ç—ã–Ω–Ω–æ–π –ø–ª–∞–Ω–µ—Ç–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–∞–º—ã–π —Ü–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å –≤–æ –≤—Å–µ–ª–µ–Ω–Ω–æ–π ‚Äî –ø—Ä—è–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –∂–∏–∑–Ω—å –∏ –¥–µ–ª–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –º–µ–∂–∑–≤—ë–∑–¥–Ω—ã–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è. –ö–æ–≥–¥–∞ –µ–≥–æ —Å–µ–º—å—è –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ª–æ–≤—É—à–∫—É –∑–ª–æ–≤–µ—â–µ–≥–æ –∑–∞–≥–æ–≤–æ—Ä–∞, –ü–æ–ª –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ —Å–∞–º–æ–µ —Å–µ—Ä–¥—Ü–µ –ê—Ä—Ä–∞–∫–∏—Å–∞, —á—Ç–æ–±—ã –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è —Å —Ñ—Ä–∏–º–µ–Ω–∞–º–∏ –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç—å –¥—Ä–µ–≤–Ω–µ–µ –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –∏–∑–º–µ–Ω–∏—Ç —Å—É–¥—å–±—É –≥–∞–ª–∞–∫—Ç–∏–∫–∏.'
            },
            {
                'title': '–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã: –≠–ø–æ—Ö–∞ –∑–≤–µ—Ä–µ–π',
                'duration': 127,
                'genre': '–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
                'age_rating': '12+',
                'poster': 'transformers.jpg',
                'short_description': '–ê–≤—Ç–æ–±–æ—Ç—ã –∏ –ú–∞–∫—Å–∏–º–∞–ª—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è —Å —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–æ–º –ø—Ä–æ—Ç–∏–≤ —Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –ü—Ä–µ–¥–∞–∫–æ–Ω–æ–≤.',
                'description': '–ê–≤—Ç–æ–±–æ—Ç—ã –∏ –ú–∞–∫—Å–∏–º–∞–ª—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è —Å —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–æ–º –ø—Ä–æ—Ç–∏–≤ —Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –ü—Ä–µ–¥–∞–∫–æ–Ω–æ–≤ –≤ –±–∏—Ç–≤–µ –∑–∞ –ó–µ–º–ª—é. –î–µ–π—Å—Ç–≤–∏–µ —Ñ–∏–ª—å–º–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ 1994 –≥–æ–¥—É, –∫–æ–≥–¥–∞ –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–µ —Ä–æ–±–æ—Ç—ã —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å—Ä–µ–¥–∏ –ª—é–¥–µ–π. –ö–æ–≥–¥–∞ –Ω–æ–≤–∞—è —É–≥—Ä–æ–∑–∞ emerges –∏–∑ –∫–æ—Å–º–æ—Å–∞, –ê–≤—Ç–æ–±–æ—Ç—ã –¥–æ–ª–∂–Ω—ã –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å—Å—è —Å –ø–ª–µ–º–µ–Ω–µ–º –ú–∞–∫—Å–∏–º–∞–ª–æ–≤, —á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å –ø–ª–∞–Ω–µ—Ç—É –æ—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è. –í —ç—Ç–æ–π —ç–ø–∏—á–µ—Å–∫–æ–π –±–∏—Ç–≤–µ —Ä–µ—à–∞–µ—Ç—Å—è —Å—É–¥—å–±–∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ó–µ–º–ª–∏, –Ω–æ –∏ –≤—Å–µ–π –≥–∞–ª–∞–∫—Ç–∏–∫–∏.'
            }
        ]

        movies = []
        for data in movies_data:
            # –ü–æ–ª—É—á–∞–µ–º –æ–±—ä–µ–∫—Ç Genre –∏–∑ —Å–ª–æ–≤–∞—Ä—è (–ø—Ä–∏–≤–æ–¥–∏–º –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –≤–∏–¥—É)
            genre_name = data['genre'].strip().title()
            if genres and genre_name in genres:
                genre_obj = genres[genre_name]
            else:
                # –ï—Å–ª–∏ –∂–∞–Ω—Ä–∞ –Ω–µ—Ç –≤ —Å–ª–æ–≤–∞—Ä–µ, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
                genre_obj, created = Genre.objects.get_or_create(name=genre_name)
                if created:
                    self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω –∂–∞–Ω—Ä: {genre_name}'))

            # –ü–æ–ª—É—á–∞–µ–º –æ–±—ä–µ–∫—Ç AgeRating –∏–∑ —Å–ª–æ–≤–∞—Ä—è
            age_rating_name = data['age_rating']
            if age_ratings and age_rating_name in age_ratings:
                age_rating_obj = age_ratings[age_rating_name]
            else:
                # –ï—Å–ª–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞ –Ω–µ—Ç –≤ —Å–ª–æ–≤–∞—Ä–µ, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
                default_description = {
                    '0+': '–§–∏–ª—å–º —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑—Ä–∞—Å—Ç–æ–≤',
                    '6+': '–§–∏–ª—å–º —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è –¥–µ—Ç–µ–π —Å—Ç–∞—Ä—à–µ 6 –ª–µ—Ç',
                    '12+': '–§–∏–ª—å–º —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è –¥–µ—Ç–µ–π —Å—Ç–∞—Ä—à–µ 12 –ª–µ—Ç',
                    '16+': '–§–∏–ª—å–º —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è –¥–µ—Ç–µ–π —Å—Ç–∞—Ä—à–µ 16 –ª–µ—Ç',
                    '18+': '–§–∏–ª—å–º –∑–∞–ø—Ä–µ—â–µ–Ω –¥–ª—è –¥–µ—Ç–µ–π –º–ª–∞–¥—à–µ 18 –ª–µ—Ç',
                }.get(age_rating_name, '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç')

                age_rating_obj, created = AgeRating.objects.get_or_create(
                    name=age_rating_name,
                    defaults={'description': default_description}
                )
                if created:
                    self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ä–µ–π—Ç–∏–Ω–≥: {age_rating_name}'))

            # –°–æ–∑–¥–∞–µ–º —Ñ–∏–ª—å–º
            movie = Movie.objects.create(
                title=data['title'],
                short_description=data['short_description'],
                description=data['description'],
                duration=timedelta(minutes=data['duration']),
                genre=genre_obj,  # –ø–µ—Ä–µ–¥–∞–µ–º –æ–±—ä–µ–∫—Ç Genre
                age_rating=age_rating_obj  # –ø–µ—Ä–µ–¥–∞–µ–º –æ–±—ä–µ–∫—Ç AgeRating
            )

            # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ—Å—Ç–µ—Ä –µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            poster_path = os.path.join(posters_dir, data['poster'])
            if os.path.exists(poster_path):
                with open(poster_path, 'rb') as f:
                    movie.poster.save(data['poster'], File(f))
                    movie.save()
                self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω —Ñ–∏–ª—å–º: {movie.title} ({age_rating_name}, —Å –ø–æ—Å—Ç–µ—Ä–æ–º)'))
            else:
                self.stdout.write(
                    self.style.WARNING(
                        f'–°–æ–∑–¥–∞–Ω —Ñ–∏–ª—å–º: {movie.title} ({age_rating_name}, –ø–æ—Å—Ç–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω: {data["poster"]})'))

            movies.append(movie)

        return movies

    def get_time_multiplier(self, screening_time):
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–∂–∏—Ç–µ–ª—å —Ü–µ–Ω—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å–µ–∞–Ω—Å–∞"""
        hour = screening_time.hour
        if 8 <= hour < 12:  # –£—Ç—Ä–æ (—Å–∞–º—ã–µ –¥–µ—à–µ–≤—ã–µ)
            return 0.7
        elif 12 <= hour < 16:  # –î–µ–Ω—å
            return 0.9
        elif 16 <= hour < 20:  # –í–µ—á–µ—Ä (–ø–æ–ø—É–ª—è—Ä–Ω–æ–µ –≤—Ä–µ–º—è)
            return 1.2
        else:  # –ù–æ—á—å (20-24) - –¥–æ—Ä–æ–∂–µ
            return 1.4

    def get_hall_base_price(self, hall_name):
        """–ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∑–∞–ª–∞"""
        price_ranges = {
            '–°—Ç–∞–Ω–¥–∞—Ä—Ç': (300, 400),
            'VIP': (1000, 1200),  # –°–∞–º—ã–µ –¥–æ—Ä–æ–≥–∏–µ - VIP
            'Love': (800, 1000),  # Love Hall –¥–æ—Ä–æ–∂–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ (2 –º–µ—Å—Ç–∞)
            '–ö–æ–º—Ñ–æ—Ä—Ç': (500, 600),  # –ö–æ–º—Ñ–æ—Ä—Ç –¥–æ—Ä–æ–∂–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞
            'IMAX': (700, 900)  # IMAX –¥–æ—Ä–æ–∂–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞
        }
        for hall_type, price_range in price_ranges.items():
            if hall_type in hall_name:
                return random.randint(price_range[0], price_range[1])
        return random.randint(300, 400)

    def is_time_slot_available(self, hall, start_time, duration):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–≤–æ–±–æ–¥–µ–Ω –ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ª–æ—Ç –≤ –∑–∞–ª–µ"""
        end_time = start_time + duration + timedelta(minutes=20)  # +20 –º–∏–Ω—É—Ç –Ω–∞ —É–±–æ—Ä–∫—É

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–µ–∞–Ω—Å –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –¥–æ 00:00
        if end_time.time() > time(23, 59):
            return False

        conflicting_screenings = Screening.objects.filter(
            hall=hall
        ).filter(
            Q(start_time__lt=end_time, end_time__gt=start_time)
        )
        return not conflicting_screenings.exists()

    def create_screenings(self, halls, movies):
        """–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∞–Ω—Å–æ–≤ –Ω–∞ –º–µ—Å—è—Ü –≤–ø–µ—Ä–µ–¥ - –º–∏–Ω–∏–º—É–º 10 —Å–µ–∞–Ω—Å–æ–≤ –Ω–∞ —Ñ–∏–ª—å–º"""
        now = timezone.localtime(timezone.now())
        # –°–µ–∞–Ω—Å—ã —Å 8 —É—Ç—Ä–∞ –¥–æ 21:30 (–ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–µ–∞–Ω—Å –¥–æ–ª–∂–µ–Ω –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è –¥–æ 24:00)
        screening_times = ['08:00', '10:30', '13:00', '15:30', '18:00', '20:30', '21:30']  # —É–±—Ä–∞–ª 22:00
        created_count = 0
        screenings_per_movie = {movie.id: 0 for movie in movies}

        # –°–æ–∑–¥–∞–µ–º —Å–µ–∞–Ω—Å—ã –Ω–∞ 30 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥
        for day in range(30):
            current_date = now + timedelta(days=day)
            if day % 7 == 0:
                self.stdout.write(f'–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∞–Ω—Å–æ–≤ –Ω–∞ {current_date.strftime("%d.%m.%Y")}...')

            # –î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è —Å–æ–∑–¥–∞–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ª–∞
            for hall in halls:
                available_times = screening_times.copy()
                random.shuffle(available_times)  # –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤—Ä–µ–º–µ–Ω–∞ –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è

                for time_str in available_times:
                    # –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—â–µ –º–∞–ª–æ —Å–µ–∞–Ω—Å–æ–≤
                    available_movies = [m for m in movies if screenings_per_movie[m.id] < 15]
                    if not available_movies:
                        available_movies = movies

                    movie = random.choice(available_movies)

                    screening_time = datetime.combine(
                        current_date.date(),
                        datetime.strptime(time_str, '%H:%M').time()
                    )
                    screening_time = timezone.make_aware(screening_time)

                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–µ–∞–Ω—Å –Ω–µ –≤ –ø—Ä–æ—à–ª–æ–º
                    if screening_time < now:
                        continue

                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å–µ–∞–Ω—Å –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –¥–æ 24:00
                    end_time = screening_time + movie.duration + timedelta(minutes=10)
                    local_end_time = timezone.localtime(end_time)
                    if local_end_time.hour >= 24 or (local_end_time.hour == 0 and local_end_time.minute > 0):
                        continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ª–æ—Ç

                    if not self.is_time_slot_available(hall, screening_time, movie.duration):
                        continue

                    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ü–µ–Ω—É
                    base_price = self.get_hall_base_price(hall.name)
                    time_multiplier = self.get_time_multiplier(screening_time)
                    final_price = int(base_price * time_multiplier)

                    # –°–æ–∑–¥–∞–µ–º —Å–µ–∞–Ω—Å
                    try:
                        Screening.objects.create(
                            movie=movie,
                            hall=hall,
                            start_time=screening_time,
                            price=final_price
                        )
                        created_count += 1
                        screenings_per_movie[movie.id] += 1
                    except ValidationError as e:
                        self.stdout.write(self.style.WARNING(f'–ü—Ä–æ–ø—É—â–µ–Ω —Å–µ–∞–Ω—Å: {e}'))
                        continue

        # –í—ã–≤–æ–¥–∏–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        self.stdout.write(self.style.SUCCESS(f'–í—Å–µ–≥–æ —Å–æ–∑–¥–∞–Ω–æ {created_count} —Å–µ–∞–Ω—Å–æ–≤'))
        for movie in movies:
            self.stdout.write(self.style.SUCCESS(f'  {movie.title}: {screenings_per_movie[movie.id]} —Å–µ–∞–Ω—Å–æ–≤'))

    def add_arguments(self, parser):
        parser.add_argument(
            '--skip-movies',
            action='store_true',
            help='–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤',
        )
        parser.add_argument(
            '--skip-halls',
            action='store_true',
            help='–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ª–æ–≤',
        )
        parser.add_argument(
            '--skip-screenings',
            action='store_true',
            help='–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∞–Ω—Å–æ–≤',
        )
        parser.add_argument(
            '--skip-statuses',
            action='store_true',
            help='–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –±–∏–ª–µ—Ç–æ–≤',
        )